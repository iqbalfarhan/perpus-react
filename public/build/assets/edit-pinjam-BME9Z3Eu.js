import{r as b,v,j as e}from"./app-CuTFWHAe.js";import{D as o,d as i}from"./date-picker-Cy03XPKE.js";import{F as n}from"./form-control-Zf8vSzLy.js";import{A as C,b as D}from"./avatar-QLOCQ9d7.js";import{B as l}from"./button-Cd7sFFRN.js";import{I as _}from"./input-BwhpgtM2.js";import{L as d}from"./label-C_vIBvGw.js";import{S as Y}from"./scroll-area-CT_IZIce.js";import{S as k,a as y,b as N,c as T,d as m}from"./select-TK_vaCUB.js";import{S as I}from"./separator-C6bigXqV.js";import{S as M,a as B,b as E,c as P,d as w,e as A,f as F,g as L}from"./sheet-BPAHl7Ib.js";import{S as c}from"./switch-DEksz9Tg.js";import{T as O}from"./textarea-Ct8MG5pM.js";import{c as R}from"./utils-BldNzIHX.js";import{t as h}from"./index-Cr4vvYJV.js";/* empty css            */import"./chevron-right-BK8X6ucq.js";import"./createLucideIcon-CwLcMOID.js";import"./index-D9B_KDrM.js";import"./index-CagErs3-.js";import"./index-KWzzRgEU.js";import"./index-BhMOsRWa.js";import"./index-DIcONf7H.js";import"./index-Cybx4eJN.js";import"./index-BMyU5h93.js";import"./index-CFjP5EH2.js";import"./index-D1vV8S7h.js";import"./index-BdQq_4o_.js";import"./index-DyNF8MXF.js";import"./index-BdwKS5dj.js";import"./check-DtuR4GvH.js";import"./x-CyKZPLTY.js";const Se=({children:u,pinjam:t,users:p})=>{const[x,j]=b.useState(!1),{data:r,setData:s,errors:f,put:g}=v({user_id:t.user.id,loan_date:t.loan_date??void 0,due_date:t.due_date??void 0,note:t.note,returned:t.returned,returned_at:t.returned_at,late:t.late,fine:t.fine??void 0}),S=a=>{a.preventDefault(),g(route("pinjam.update",t.id),{onSuccess:()=>{h.success("Berhasil mengubah data peminjaman")},onError:()=>{h.error("Gagal mengubah data peminjaman")}})};return e.jsxs(M,{open:x,onOpenChange:j,children:[e.jsx(B,{asChild:!0,children:u}),e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsx(w,{children:"Edit info peminjaman"}),e.jsx(A,{children:t.code})]}),e.jsxs(Y,{className:"flex-1 overflow-auto",children:[e.jsxs("div",{className:"space-y-6 px-4",children:[e.jsx(n,{label:"Nama peminjam",children:e.jsxs(k,{value:r.user_id.toString(),onValueChange:a=>s("user_id",parseInt(a)),children:[e.jsx(y,{className:R("w-full",f.user_id&&"border-destructive"),children:e.jsx(N,{placeholder:"Pilih user"})}),e.jsxs(T,{children:[e.jsx(m,{value:"null",children:"Pilih peminjam"}),p.map(a=>e.jsxs(m,{value:a.id.toString(),children:[e.jsx(C,{className:"size-4",children:e.jsx(D,{src:a.avatar,alt:a.name})}),a.name]},a.id))]})]})}),e.jsx(n,{label:"Tanggal pinjaman",children:e.jsx(o,{date:i(r.loan_date).toDate(),onDateChange:a=>s("loan_date",i(a).format("YYYY-MM-DD"))})}),e.jsx(n,{label:"Rencana pengembalian",children:e.jsx(o,{date:i(r.due_date).toDate(),onDateChange:a=>s("due_date",i(a).format("YYYY-MM-DD"))})}),e.jsx(n,{label:"Catatan",children:e.jsx(O,{value:r.note,onChange:a=>s("note",a.target.value)})})]}),t.returned&&e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"my-6"}),e.jsxs("div",{className:"space-y-6 px-4",children:[e.jsx(n,{label:"Status pengeembalian",children:e.jsx(l,{type:"button",variant:"ghost",asChild:!0,children:e.jsxs(d,{children:[e.jsx(c,{checked:r.returned,onCheckedChange:a=>{s("returned",a),s("returned_at",a==!0?t.returned_at:void 0)}}),e.jsx("span",{children:"Buku dipinjaman ini sudah dikembalikan"})]})})}),r.returned&&e.jsx(n,{label:"Tanggal pengembalian",children:e.jsx(o,{date:i(r.returned_at).toDate(),onDateChange:a=>s("returned_at",i(a).format("YYYY-MM-DD"))})}),e.jsx(n,{label:"Status Keterlambatan",children:e.jsx(l,{type:"button",variant:"ghost",asChild:!0,children:e.jsxs(d,{children:[e.jsx(c,{checked:r.late,onCheckedChange:a=>s("late",a)}),e.jsx("span",{children:"Pinjaman ini terlambat dikembalikan"})]})})}),r.late&&e.jsx(n,{label:"Denda keterlambatan",children:e.jsx(_,{value:r.fine,onChange:a=>s("fine",parseInt(a.target.value))})})]})]})]}),e.jsx(F,{children:e.jsxs("form",{onSubmit:S,className:"flex justify-between",children:[e.jsx(L,{asChild:!0,children:e.jsx(l,{type:"button",variant:"ghost",children:"Batal"})}),e.jsx(l,{children:"Simpan"})]})})]})]})};export{Se as default};
