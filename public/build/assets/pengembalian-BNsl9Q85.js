import{j as e,v as _,$ as H,m as g}from"./app-U1esR2_f.js";import{C as I}from"./container-BYtifbYZ.js";import{d as s,D as w}from"./date-picker-B3dX8wbv.js";import{F as d}from"./form-control-cxFRD8XI.js";import{c as A}from"./index-CFjP5EH2.js";import{c as D}from"./utils-BldNzIHX.js";import{B as n}from"./button-p5LaSusP.js";import{C as F,a as L,b as $,c as E,d as o,e as K}from"./card-D9mfmGyp.js";import{C as f}from"./checkbox-Kqug3aIN.js";import{I as R}from"./input-DJmIaid5.js";import{L as b}from"./label-CBVR8LL-.js";import{S as v}from"./separator-DfpQNY03.js";import{T as V,a as q,b as k,c,e as z,d as m}from"./table-Bw0edw_Y.js";import{T as J}from"./textarea-Q_ASPQth.js";import{A as O}from"./app-layout-Dm5Qe5Se.js";import{t as C}from"./index-Cha1HoGk.js";import Q from"./detail-buku-Bzp-NQAs.js";import{c as U}from"./createLucideIcon-DZi8R-Gi.js";import{C as y}from"./check-BxoGQyzr.js";/* empty css            */import"./chevron-right-BQ-tg-4u.js";import"./index-BP9IHZqR.js";import"./index-HHF6f8a_.js";import"./index-D5DMQNhS.js";import"./index-lvPJKeON.js";import"./index-B2L6SKwX.js";import"./index-h7oBu2XD.js";import"./index-DYp3lgDe.js";import"./index-DR9KkWcC.js";import"./sheet-CMYlCEIB.js";import"./x-Ui334l1w.js";import"./index-BCICVw8F.js";import"./index--RMvD45j.js";import"./avatar-Dbob81iM.js";import"./app-logo-icon-DQqZtHRI.js";import"./scroll-area-DzOBIJ6B.js";import"./index-BdQq_4o_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],W=U("Info",G),X=A("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Z({className:a,variant:i,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:D(X({variant:i}),a),...r})}function ee({className:a,...i}){return e.jsx("div",{"data-slot":"alert-title",className:D("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...i})}const Le=({pinjam:a,checked_count:i})=>{var p,x,j;const{data:r,setData:l,put:u,errors:Y,hasErrors:M}=_({returned_at:a.returned_at??s().format("YYYY-MM-DD HH:mm:ss"),fine:a.fine??0,note:a.note??"",late:a.late}),T=[{title:"Peminjaman",href:route("pinjam.index")},{title:a.code,href:route("pinjam.show",a.id)},{title:"Pengembalian",href:route("pinjam.pengembalian",a.id)}],P=i===((p=a.bukus)==null?void 0:p.length),N=()=>{u(route("pinjam.set-pengembalian",a.id),{onSuccess:()=>{g.visit(route("pinjam.index")),C.success("Berhasil update pinjaman")}})},B=()=>{u(route("pinjam.update",a.id),{onSuccess:()=>{C.success("Berhasil update pinjaman")}})},S=s(a.due_date).isBefore(s(),"day");return e.jsxs(O,{breadcrumbs:T,children:[e.jsx(H,{title:`Pengembalian ${a.code}`}),e.jsx(I,{title:"Pengembalian pinjaman",description:"Pengembalian peminjaman",children:e.jsxs(F,{children:[e.jsxs(L,{children:[e.jsxs($,{children:["Periksa kembali buku yang dipinjam ",a.status]}),e.jsxs(E,{children:["Peminjaman ini dilakukan oleh ",a.user.name," pada tanggal ",s(a.loan_date).format("DD MMMM YYYY")," dan rencana pengembalian tanggal ",s(a.due_date).format("DD MMMM YYYY")]})]}),S&&e.jsx(o,{children:e.jsxs(Z,{variant:"destructive",children:[e.jsx(W,{}),e.jsx(ee,{children:"Tanggal rencana pengembalian lewat dari hari ini"})]})}),e.jsx(o,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsx(d,{label:"Tanggal pengembalian",children:e.jsx(w,{date:s(r.returned_at).toDate(),onDateChange:t=>l("returned_at",s(t).format("YYYY-MM-DD HH:mm:ss"))})}),e.jsx(d,{label:"Status keterlambatan",children:e.jsx(n,{variant:"ghost",asChild:!0,children:e.jsxs(b,{children:[e.jsx(f,{defaultChecked:r.late,onCheckedChange:t=>l("late",t)}),e.jsx("span",{children:"Apakah pinjaman ini terlambat dikembalikan?"})]})})}),r.late==!0&&e.jsx(d,{label:"Nominal denda",children:e.jsx(R,{type:"number",placeholder:"Nominal denda",value:r.fine,onChange:t=>l("fine",parseInt(t.target.value))})}),e.jsx("div",{className:"col-span-full",children:e.jsx(d,{label:"Keterangan tambahan",children:e.jsx(J,{placeholder:"Keterangan tambahan",value:r.note,onChange:t=>l("note",t.target.value)})})})]})}),e.jsx(v,{}),e.jsx(o,{children:e.jsxs(V,{children:[e.jsx(q,{children:e.jsxs(k,{children:[e.jsx(c,{children:"ISBN"}),e.jsx(c,{children:"Judul buku"}),e.jsx(c,{children:"Qty"}),e.jsx(c,{children:"Pengecekan buku"})]})}),e.jsx(z,{children:(x=a.bukus)==null?void 0:x.map(t=>e.jsxs(k,{children:[e.jsx(m,{children:t.isbn}),e.jsx(m,{children:e.jsx(Q,{buku:t,children:e.jsx("div",{children:t.title})})}),e.jsx(m,{children:t.pivot.qty}),e.jsx(m,{children:e.jsx(n,{variant:"ghost",asChild:!0,children:e.jsxs(b,{children:[e.jsx(f,{defaultChecked:t.pivot.checked,onCheckedChange:h=>g.put(route("pinjamitem.update",t.pivot.id),{checked:h},{preserveScroll:!0})}),e.jsx("span",{children:"Sudah diperiksa"})]})})})]}))})]})}),M&&e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsx(o,{className:"text-destructive",children:Object.entries(Y).map(([t,h])=>e.jsxs("div",{children:[t," : ",h]}))})]}),e.jsxs(K,{className:"flex items-center justify-between",children:[e.jsxs(n,{disabled:!0,variant:"ghost",children:["Buku yang sudah di cek: ",i," dari ",(j=a.bukus)==null?void 0:j.length]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{disabled:!P,onClick:N,children:[e.jsx(y,{}),"Semua buku sudah dicek, ubah status pinjaman menjadi selesai"]}),e.jsxs(n,{onClick:B,children:[e.jsx(y,{}),"Simpan"]})]})]})]})})]})};export{Le as default};
