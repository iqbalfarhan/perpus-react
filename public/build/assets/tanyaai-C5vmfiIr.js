import{r as Ye,j as B,$ as xi}from"./app-CuTFWHAe.js";import{C as Mi}from"./container-B8oyuVxK.js";import{B as _t}from"./button-Cd7sFFRN.js";import{C as ki,d as Et}from"./card-B1bjcNU7.js";import{I as Ri}from"./input-BwhpgtM2.js";import{S as wi}from"./separator-C6bigXqV.js";import{A as Pi}from"./app-layout-DtvwsQil.js";import{c as Qn}from"./createLucideIcon-CwLcMOID.js";import{M as Ni}from"./index-DrV7tcvw.js";/* empty css            */import"./index-CagErs3-.js";import"./index-CFjP5EH2.js";import"./utils-BldNzIHX.js";import"./index-BhMOsRWa.js";import"./index-Cr4vvYJV.js";import"./sheet-BPAHl7Ib.js";import"./index-DIcONf7H.js";import"./index-D9B_KDrM.js";import"./index-KWzzRgEU.js";import"./x-CyKZPLTY.js";import"./index-Cybx4eJN.js";import"./index-BMyU5h93.js";import"./index-DyNF8MXF.js";import"./index-D1vV8S7h.js";import"./avatar-QLOCQ9d7.js";import"./app-logo-icon-DxqoCxNl.js";import"./chevron-right-BK8X6ucq.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Vi=Qn("RefreshCw",Di);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Fi=Qn("Send",Li),Ui=["hanya gunakan bahasa indonesia untuk menjawab pertanyaan","kamu adalah fitur tanya ai didalam aplikasi ini","kamu adalah seorang pemandu aplikasi perpustakaan untuk QnA saja, bukan penjaga perpustakaan","jangan membuat atau menjawab pertanyaan yang tidak berkaitan dengan perpustakaan","fitur login: masuk ke menu login, di halaman tersebut terdapat form anda bisa masuk menggunakan email dan password yang sudah didaftarkan oleh admin aplikasi","fitur logout: dibagian bawah sidebar klik avatar anda, di menu dropdown pilih logout","fitur registrasi dimatikan, minta admin untuk membuat akun pengguna","fitur dashboard: masuk ke menu dashboard, di halaman tersebut terdapat 2 bagian yaitu: 1. info status anggota, jumlah buku dan peminjaman, 2. pencarian buku","fitur akun pengguna atau user: masuk ke menu akun pengguna, di halaman tersebut terdapat table list pengguna, tombol tambah pengguna di kanan atas, tombol action reset password (icon kunci), edit (icon pensil) dan delete (icon trash) di bagian kanan tiap baris table field yang ada pada table pengguna yaitu nama, email, password, role:admin|user, active:boolean","fitur kategori buku: masuk ke menu kategori buku, di halaman tersebut terdapat table kategori buku, tombol tambah kategori di kanan atas, tombol action edit (icon pensil) dan delete (icon trash) di bagian kanan tiap baris table field yang ada pada table kategori buku yaitu nama kategori, deskripsi kategori, ada info jumlah buku dengan kategori itu (hanya relasi dengan table buku, tidak dalam field kategori buku)","fitur bahasa buku (pilihan bahasa untuk pengelompokan buku berdasarkan bahasa): masuk ke menu bahasa buku, di halaman ini ada table berisi daftar bahasa dengan kolom emoji bendera negara dan nama negara, ada tombol tambah bahasa di kanan atas, serta tombol action edit dan delete di tiap baris","fitur penerbit: masuk ke menu penerbit, di halaman ini ada table berisi nama penerbit, alamat, dan logo penerbit, tombol tambah penerbit di kanan atas, form tambah/edit memungkinkan upload logo berupa gambar","fitur rak buku: masuk ke menu rak buku, di halaman ini ada table daftar rak dengan kolom nama rak, lokasi rak, kapasitas rak, dan kategori (relasi ke kategori buku), tombol tambah rak di kanan atas, tombol action edit dan delete di tiap baris","fitur daftar buku: masuk ke menu daftar buku, di halaman tersebut terdapat table daftar buku, tombol tambah buku di kanan atas, tombol action, lihat detail (icon folder), edit (icon pensil) dan delete (icon trash) di bagian kanan tiap baris table","field yang ada pada table daftar buku yaitu judul buku, sinopsis, penulis, no isbn, jumlah halaman, penerbit (relasi), kategori (relasi), bahasa (relasi), raj (relasi), jumlah stok, cover buku (opsional)","saat menambah atau mengedit buku, form akan muncul dengan field sesuai table, field kategori, rak, penerbit dan bahasa menggunakan dropdown dari data yang memiliki relasi dengan buku","cetak label buku di halaman detail buku, tombol cetak label buku di kanan atas. setelah masuk, bisa input berapa banyak label yang akan dicetak dengan tombol plus dan minus, gunakan ctrl+p untuk buka panel printer","fitur peminjaman dibagi jadi 2 table: pinjam dan item pinjaman","table pinjam berisi: user_id, tanggal_pinjam, rencana_pengembalian, status:dipinjam|dikembalikan|terlambat, denda, tanggal_realisasi_pengembalian","table item pinjaman berisi: buku_id, qty, dicek:boolean","saat create peminjaman: masuk ke menu peminjaman, klik tombol tambah peminjaman","di halaman tambah peminjaman: pilih user (dropdown), tanggal pinjam terisi otomatis (autofill), isi tanggal rencana pengembalian, lalu tambahkan buku dengan scan barcode (setiap scan akan menambah item dengan qty default = 1), jika scan ulang buku yg sama maka qty-nya bertambah","setelah semua item buku ditambahkan, klik simpan untuk menyimpan transaksi pinjam ke database",'untuk proses pengembalian: cari data peminjaman dengan status masih "dipinjam", klik action pengembalian',"akan masuk ke halaman khusus pengembalian, list semua item buku dari item pinjaman akan ditampilkan, penjaga cek fisik buku lalu beri checklist satu per satu (field dicek)",'jika semua buku sudah dicek, klik tombol "Proses Pengembalian Selesai"','jika tanggal rencana pengembalian sudah lewat dari tanggal hari ini, maka akan muncul input tambahan untuk mengisi denda yang harus dibayar, status akan otomatis berubah jadi "terlambat" setelah denda diisi dan pengembalian diproses','fitur ganti tema: dibagian bawah sidebar klik avatar anda, di menu dropdown pilih setting masuk tab "appearance", di halaman tersebut terdapat 3 tombol, tombol icon bulan untuk mengganti tema gelap, tombol icon matahari untuk mengganti tema terang dan tombol dengan icon monitor untuk menyesuaikan dengan tema perankat saat ini'];var L;(function(i){i.assertEqual=o=>{};function t(o){}i.assertIs=t;function e(o){throw new Error}i.assertNever=e,i.arrayToEnum=o=>{const a={};for(const l of o)a[l]=l;return a},i.getValidEnumValues=o=>{const a=i.objectKeys(o).filter(u=>typeof o[o[u]]!="number"),l={};for(const u of a)l[u]=o[u];return i.objectValues(l)},i.objectValues=o=>i.objectKeys(o).map(function(a){return o[a]}),i.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const a=[];for(const l in o)Object.prototype.hasOwnProperty.call(o,l)&&a.push(l);return a},i.find=(o,a)=>{for(const l of o)if(a(l))return l},i.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function n(o,a=" | "){return o.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}i.joinValues=n,i.jsonStringifyReplacer=(o,a)=>typeof a=="bigint"?a.toString():a})(L||(L={}));var St;(function(i){i.mergeShapes=(t,e)=>({...t,...e})})(St||(St={}));const T=L.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ee=i=>{switch(typeof i){case"undefined":return T.undefined;case"string":return T.string;case"number":return Number.isNaN(i)?T.nan:T.number;case"boolean":return T.boolean;case"function":return T.function;case"bigint":return T.bigint;case"symbol":return T.symbol;case"object":return Array.isArray(i)?T.array:i===null?T.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?T.promise:typeof Map<"u"&&i instanceof Map?T.map:typeof Set<"u"&&i instanceof Set?T.set:typeof Date<"u"&&i instanceof Date?T.date:T.object;default:return T.unknown}},v=L.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class j extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}format(t){const e=t||function(a){return a.message},n={_errors:[]},o=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(o);else if(l.code==="invalid_return_type")o(l.returnTypeError);else if(l.code==="invalid_arguments")o(l.argumentsError);else if(l.path.length===0)n._errors.push(e(l));else{let u=n,d=0;for(;d<l.path.length;){const c=l.path[d];d===l.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(e(l))):u[c]=u[c]||{_errors:[]},u=u[c],d++}}};return o(this),n}static assert(t){if(!(t instanceof j))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,L.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){const e={},n=[];for(const o of this.issues)o.path.length>0?(e[o.path[0]]=e[o.path[0]]||[],e[o.path[0]].push(t(o))):n.push(t(o));return{formErrors:n,fieldErrors:e}}get formErrors(){return this.flatten()}}j.create=i=>new j(i);const ze=(i,t)=>{let e;switch(i.code){case v.invalid_type:i.received===T.undefined?e="Required":e=`Expected ${i.expected}, received ${i.received}`;break;case v.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(i.expected,L.jsonStringifyReplacer)}`;break;case v.unrecognized_keys:e=`Unrecognized key(s) in object: ${L.joinValues(i.keys,", ")}`;break;case v.invalid_union:e="Invalid input";break;case v.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${L.joinValues(i.options)}`;break;case v.invalid_enum_value:e=`Invalid enum value. Expected ${L.joinValues(i.options)}, received '${i.received}'`;break;case v.invalid_arguments:e="Invalid function arguments";break;case v.invalid_return_type:e="Invalid function return type";break;case v.invalid_date:e="Invalid date";break;case v.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(e=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?e=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?e=`Invalid input: must end with "${i.validation.endsWith}"`:L.assertNever(i.validation):i.validation!=="regex"?e=`Invalid ${i.validation}`:e="Invalid";break;case v.too_small:i.type==="array"?e=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?e=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?e=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?e=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:e="Invalid input";break;case v.too_big:i.type==="array"?e=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?e=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?e=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?e=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?e=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:e="Invalid input";break;case v.custom:e="Invalid input";break;case v.invalid_intersection_types:e="Intersection results could not be merged";break;case v.not_multiple_of:e=`Number must be a multiple of ${i.multipleOf}`;break;case v.not_finite:e="Number must be finite";break;default:e=t.defaultError,L.assertNever(i)}return{message:e}};let bi=ze;function Gi(){return bi}const qi=i=>{const{data:t,path:e,errorMaps:n,issueData:o}=i,a=[...e,...o.path||[]],l={...o,path:a};if(o.message!==void 0)return{...o,path:a,message:o.message};let u="";const d=n.filter(c=>!!c).slice().reverse();for(const c of d)u=c(l,{data:t,defaultError:u}).message;return{...o,path:a,message:u}};function C(i,t){const e=Gi(),n=qi({issueData:t,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,e,e===ze?void 0:ze].filter(o=>!!o)});i.common.issues.push(n)}class J{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){const n=[];for(const o of e){if(o.status==="aborted")return x;o.status==="dirty"&&t.dirty(),n.push(o.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,e){const n=[];for(const o of e){const a=await o.key,l=await o.value;n.push({key:a,value:l})}return J.mergeObjectSync(t,n)}static mergeObjectSync(t,e){const n={};for(const o of e){const{key:a,value:l}=o;if(a.status==="aborted"||l.status==="aborted")return x;a.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||o.alwaysSet)&&(n[a.value]=l.value)}return{status:t.value,value:n}}}const x=Object.freeze({status:"aborted"}),Se=i=>({status:"dirty",value:i}),W=i=>({status:"valid",value:i}),At=i=>i.status==="aborted",It=i=>i.status==="dirty",me=i=>i.status==="valid",Ve=i=>typeof Promise<"u"&&i instanceof Promise;var E;(function(i){i.errToObj=t=>typeof t=="string"?{message:t}:t||{},i.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(E||(E={}));class X{constructor(t,e,n,o){this._cachedPath=[],this.parent=t,this.data=e,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xt=(i,t)=>{if(me(t))return{success:!0,data:t.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const e=new j(i.common.issues);return this._error=e,this._error}}};function R(i){if(!i)return{};const{errorMap:t,invalid_type_error:e,required_error:n,description:o}=i;if(t&&(e||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:o}:{errorMap:(l,u)=>{const{message:d}=i;return l.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??n??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:d??e??u.defaultError}},description:o}}class D{get description(){return this._def.description}_getType(t){return ee(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:ee(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new J,ctx:{common:t.parent.common,data:t.data,parsedType:ee(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(Ve(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const n=this.safeParse(t,e);if(n.success)return n.data;throw n.error}safeParse(t,e){const n={common:{issues:[],async:(e==null?void 0:e.async)??!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ee(t)},o=this._parseSync({data:t,path:n.path,parent:n});return xt(n,o)}"~validate"(t){var n,o;const e={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ee(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:e});return me(a)?{value:a.value}:{issues:e.common.issues}}catch(a){(o=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),e.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:e}).then(a=>me(a)?{value:a.value}:{issues:e.common.issues})}async parseAsync(t,e){const n=await this.safeParseAsync(t,e);if(n.success)return n.data;throw n.error}async safeParseAsync(t,e){const n={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ee(t)},o=this._parse({data:t,path:n.path,parent:n}),a=await(Ve(o)?o:Promise.resolve(o));return xt(n,a)}refine(t,e){const n=o=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(o):e;return this._refinement((o,a)=>{const l=t(o),u=()=>a.addIssue({code:v.custom,...n(o)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(t,e){return this._refinement((n,o)=>t(n)?!0:(o.addIssue(typeof e=="function"?e(n,o):e),!1))}_refinement(t){return new ye({schema:this,typeName:I.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return te.create(this,this._def)}nullable(){return ve.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return z.create(this)}promise(){return Ge.create(this,this._def)}or(t){return Fe.create([this,t],this._def)}and(t){return Ue.create(this,t,this._def)}transform(t){return new ye({...R(this._def),schema:this,typeName:I.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e=typeof t=="function"?t:()=>t;return new et({...R(this._def),innerType:this,defaultValue:e,typeName:I.ZodDefault})}brand(){return new uo({typeName:I.ZodBranded,type:this,...R(this._def)})}catch(t){const e=typeof t=="function"?t:()=>t;return new tt({...R(this._def),innerType:this,catchValue:e,typeName:I.ZodCatch})}describe(t){const e=this.constructor;return new e({...this._def,description:t})}pipe(t){return pt.create(this,t)}readonly(){return nt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $i=/^c[^\s-]{8,}$/i,Bi=/^[0-9a-z]+$/,Hi=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ji=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Oi=/^[a-z0-9_-]{21}$/i,Wi=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Yi=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zi=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ki="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ze;const zi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Xi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Qi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ji=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eo=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,to=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jn="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",no=new RegExp(`^${jn}$`);function ei(i){let t="[0-5]\\d";i.precision?t=`${t}\\.\\d{${i.precision}}`:i.precision==null&&(t=`${t}(\\.\\d+)?`);const e=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e}`}function io(i){return new RegExp(`^${ei(i)}$`)}function oo(i){let t=`${jn}T${ei(i)}`;const e=[];return e.push(i.local?"Z?":"Z"),i.offset&&e.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${e.join("|")})`,new RegExp(`^${t}$`)}function ro(i,t){return!!((t==="v4"||!t)&&zi.test(i)||(t==="v6"||!t)&&Qi.test(i))}function so(i,t){if(!Wi.test(i))return!1;try{const[e]=i.split("."),n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||t&&o.alg!==t)}catch{return!1}}function ao(i,t){return!!((t==="v4"||!t)&&Xi.test(i)||(t==="v6"||!t)&&ji.test(i))}class Z extends D{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==T.string){const a=this._getOrReturnCtx(t);return C(a,{code:v.invalid_type,expected:T.string,received:a.parsedType}),x}const n=new J;let o;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(o=this._getOrReturnCtx(t,o),C(o,{code:v.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")t.data.length>a.value&&(o=this._getOrReturnCtx(t,o),C(o,{code:v.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const l=t.data.length>a.value,u=t.data.length<a.value;(l||u)&&(o=this._getOrReturnCtx(t,o),l?C(o,{code:v.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&C(o,{code:v.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Zi.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"email",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Ze||(Ze=new RegExp(Ki,"u")),Ze.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"emoji",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Ji.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"uuid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")Oi.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"nanoid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")$i.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"cuid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Bi.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"cuid2",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Hi.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"ulid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{o=this._getOrReturnCtx(t,o),C(o,{validation:"url",code:v.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"regex",code:v.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(o=this._getOrReturnCtx(t,o),C(o,{code:v.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(o=this._getOrReturnCtx(t,o),C(o,{code:v.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(o=this._getOrReturnCtx(t,o),C(o,{code:v.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?oo(a).test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{code:v.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?no.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{code:v.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?io(a).test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{code:v.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?Yi.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"duration",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?ro(t.data,a.version)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"ip",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?so(t.data,a.alg)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"jwt",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?ao(t.data,a.version)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"cidr",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?eo.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"base64",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?to.test(t.data)||(o=this._getOrReturnCtx(t,o),C(o,{validation:"base64url",code:v.invalid_string,message:a.message}),n.dirty()):L.assertNever(a);return{status:n.value,value:t.data}}_regex(t,e,n){return this.refinement(o=>t.test(o),{validation:e,code:v.invalid_string,...E.errToObj(n)})}_addCheck(t){return new Z({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...E.errToObj(t)})}url(t){return this._addCheck({kind:"url",...E.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...E.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...E.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...E.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...E.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...E.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...E.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...E.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...E.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...E.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...E.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...E.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...E.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...E.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...E.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...E.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:e==null?void 0:e.position,...E.errToObj(e==null?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...E.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...E.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...E.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...E.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...E.errToObj(e)})}nonempty(t){return this.min(1,E.errToObj(t))}trim(){return new Z({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Z({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Z({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}Z.create=i=>new Z({checks:[],typeName:I.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...R(i)});function lo(i,t){const e=(i.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,o=e>n?e:n,a=Number.parseInt(i.toFixed(o).replace(".","")),l=Number.parseInt(t.toFixed(o).replace(".",""));return a%l/10**o}class se extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==T.number){const a=this._getOrReturnCtx(t);return C(a,{code:v.invalid_type,expected:T.number,received:a.parsedType}),x}let n;const o=new J;for(const a of this._def.checks)a.kind==="int"?L.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),C(n,{code:v.invalid_type,expected:"integer",received:"float",message:a.message}),o.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),C(n,{code:v.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),C(n,{code:v.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="multipleOf"?lo(t.data,a.value)!==0&&(n=this._getOrReturnCtx(t,n),C(n,{code:v.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),C(n,{code:v.not_finite,message:a.message}),o.dirty()):L.assertNever(a);return{status:o.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,E.toString(e))}gt(t,e){return this.setLimit("min",t,!1,E.toString(e))}lte(t,e){return this.setLimit("max",t,!0,E.toString(e))}lt(t,e){return this.setLimit("max",t,!1,E.toString(e))}setLimit(t,e,n,o){return new se({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:E.toString(o)}]})}_addCheck(t){return new se({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:E.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:E.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:E.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:E.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:E.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:E.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:E.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:E.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:E.toString(t)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&L.isInteger(t.value))}get isFinite(){let t=null,e=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(e===null||n.value>e)&&(e=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(e)&&Number.isFinite(t)}}se.create=i=>new se({checks:[],typeName:I.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...R(i)});class ae extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==T.bigint)return this._getInvalidInput(t);let n;const o=new J;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),C(n,{code:v.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),C(n,{code:v.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),C(n,{code:v.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):L.assertNever(a);return{status:o.value,value:t.data}}_getInvalidInput(t){const e=this._getOrReturnCtx(t);return C(e,{code:v.invalid_type,expected:T.bigint,received:e.parsedType}),x}gte(t,e){return this.setLimit("min",t,!0,E.toString(e))}gt(t,e){return this.setLimit("min",t,!1,E.toString(e))}lte(t,e){return this.setLimit("max",t,!0,E.toString(e))}lt(t,e){return this.setLimit("max",t,!1,E.toString(e))}setLimit(t,e,n,o){return new ae({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:E.toString(o)}]})}_addCheck(t){return new ae({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:E.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:E.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:E.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:E.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:E.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}ae.create=i=>new ae({checks:[],typeName:I.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...R(i)});class Le extends D{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==T.boolean){const n=this._getOrReturnCtx(t);return C(n,{code:v.invalid_type,expected:T.boolean,received:n.parsedType}),x}return W(t.data)}}Le.create=i=>new Le({typeName:I.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...R(i)});class he extends D{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==T.date){const a=this._getOrReturnCtx(t);return C(a,{code:v.invalid_type,expected:T.date,received:a.parsedType}),x}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return C(a,{code:v.invalid_date}),x}const n=new J;let o;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(o=this._getOrReturnCtx(t,o),C(o,{code:v.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(o=this._getOrReturnCtx(t,o),C(o,{code:v.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):L.assertNever(a);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new he({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:E.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:E.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}}he.create=i=>new he({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:I.ZodDate,...R(i)});class Mt extends D{_parse(t){if(this._getType(t)!==T.symbol){const n=this._getOrReturnCtx(t);return C(n,{code:v.invalid_type,expected:T.symbol,received:n.parsedType}),x}return W(t.data)}}Mt.create=i=>new Mt({typeName:I.ZodSymbol,...R(i)});class kt extends D{_parse(t){if(this._getType(t)!==T.undefined){const n=this._getOrReturnCtx(t);return C(n,{code:v.invalid_type,expected:T.undefined,received:n.parsedType}),x}return W(t.data)}}kt.create=i=>new kt({typeName:I.ZodUndefined,...R(i)});class Rt extends D{_parse(t){if(this._getType(t)!==T.null){const n=this._getOrReturnCtx(t);return C(n,{code:v.invalid_type,expected:T.null,received:n.parsedType}),x}return W(t.data)}}Rt.create=i=>new Rt({typeName:I.ZodNull,...R(i)});class wt extends D{constructor(){super(...arguments),this._any=!0}_parse(t){return W(t.data)}}wt.create=i=>new wt({typeName:I.ZodAny,...R(i)});class Xe extends D{constructor(){super(...arguments),this._unknown=!0}_parse(t){return W(t.data)}}Xe.create=i=>new Xe({typeName:I.ZodUnknown,...R(i)});class ne extends D{_parse(t){const e=this._getOrReturnCtx(t);return C(e,{code:v.invalid_type,expected:T.never,received:e.parsedType}),x}}ne.create=i=>new ne({typeName:I.ZodNever,...R(i)});class Pt extends D{_parse(t){if(this._getType(t)!==T.undefined){const n=this._getOrReturnCtx(t);return C(n,{code:v.invalid_type,expected:T.void,received:n.parsedType}),x}return W(t.data)}}Pt.create=i=>new Pt({typeName:I.ZodVoid,...R(i)});class z extends D{_parse(t){const{ctx:e,status:n}=this._processInputParams(t),o=this._def;if(e.parsedType!==T.array)return C(e,{code:v.invalid_type,expected:T.array,received:e.parsedType}),x;if(o.exactLength!==null){const l=e.data.length>o.exactLength.value,u=e.data.length<o.exactLength.value;(l||u)&&(C(e,{code:l?v.too_big:v.too_small,minimum:u?o.exactLength.value:void 0,maximum:l?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&e.data.length<o.minLength.value&&(C(e,{code:v.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&e.data.length>o.maxLength.value&&(C(e,{code:v.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),e.common.async)return Promise.all([...e.data].map((l,u)=>o.type._parseAsync(new X(e,l,e.path,u)))).then(l=>J.mergeArray(n,l));const a=[...e.data].map((l,u)=>o.type._parseSync(new X(e,l,e.path,u)));return J.mergeArray(n,a)}get element(){return this._def.type}min(t,e){return new z({...this._def,minLength:{value:t,message:E.toString(e)}})}max(t,e){return new z({...this._def,maxLength:{value:t,message:E.toString(e)}})}length(t,e){return new z({...this._def,exactLength:{value:t,message:E.toString(e)}})}nonempty(t){return this.min(1,t)}}z.create=(i,t)=>new z({type:i,minLength:null,maxLength:null,exactLength:null,typeName:I.ZodArray,...R(t)});function ce(i){if(i instanceof q){const t={};for(const e in i.shape){const n=i.shape[e];t[e]=te.create(ce(n))}return new q({...i._def,shape:()=>t})}else return i instanceof z?new z({...i._def,type:ce(i.element)}):i instanceof te?te.create(ce(i.unwrap())):i instanceof ve?ve.create(ce(i.unwrap())):i instanceof le?le.create(i.items.map(t=>ce(t))):i}class q extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),e=L.objectKeys(t);return this._cached={shape:t,keys:e},this._cached}_parse(t){if(this._getType(t)!==T.object){const c=this._getOrReturnCtx(t);return C(c,{code:v.invalid_type,expected:T.object,received:c.parsedType}),x}const{status:n,ctx:o}=this._processInputParams(t),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof ne&&this._def.unknownKeys==="strip"))for(const c in o.data)l.includes(c)||u.push(c);const d=[];for(const c of l){const f=a[c],p=o.data[c];d.push({key:{status:"valid",value:c},value:f._parse(new X(o,p,o.path,c)),alwaysSet:c in o.data})}if(this._def.catchall instanceof ne){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of u)d.push({key:{status:"valid",value:f},value:{status:"valid",value:o.data[f]}});else if(c==="strict")u.length>0&&(C(o,{code:v.unrecognized_keys,keys:u}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of u){const p=o.data[f];d.push({key:{status:"valid",value:f},value:c._parse(new X(o,p,o.path,f)),alwaysSet:f in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of d){const p=await f.key,m=await f.value;c.push({key:p,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>J.mergeObjectSync(n,c)):J.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(t){return E.errToObj,new q({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(e,n)=>{var a,l;const o=((l=(a=this._def).errorMap)==null?void 0:l.call(a,e,n).message)??n.defaultError;return e.code==="unrecognized_keys"?{message:E.errToObj(t).message??o}:{message:o}}}:{}})}strip(){return new q({...this._def,unknownKeys:"strip"})}passthrough(){return new q({...this._def,unknownKeys:"passthrough"})}extend(t){return new q({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new q({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:I.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new q({...this._def,catchall:t})}pick(t){const e={};for(const n of L.objectKeys(t))t[n]&&this.shape[n]&&(e[n]=this.shape[n]);return new q({...this._def,shape:()=>e})}omit(t){const e={};for(const n of L.objectKeys(this.shape))t[n]||(e[n]=this.shape[n]);return new q({...this._def,shape:()=>e})}deepPartial(){return ce(this)}partial(t){const e={};for(const n of L.objectKeys(this.shape)){const o=this.shape[n];t&&!t[n]?e[n]=o:e[n]=o.optional()}return new q({...this._def,shape:()=>e})}required(t){const e={};for(const n of L.objectKeys(this.shape))if(t&&!t[n])e[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof te;)a=a._def.innerType;e[n]=a}return new q({...this._def,shape:()=>e})}keyof(){return ti(L.objectKeys(this.shape))}}q.create=(i,t)=>new q({shape:()=>i,unknownKeys:"strip",catchall:ne.create(),typeName:I.ZodObject,...R(t)});q.strictCreate=(i,t)=>new q({shape:()=>i,unknownKeys:"strict",catchall:ne.create(),typeName:I.ZodObject,...R(t)});q.lazycreate=(i,t)=>new q({shape:i,unknownKeys:"strip",catchall:ne.create(),typeName:I.ZodObject,...R(t)});class Fe extends D{_parse(t){const{ctx:e}=this._processInputParams(t),n=this._def.options;function o(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return e.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new j(u.ctx.common.issues));return C(e,{code:v.invalid_union,unionErrors:l}),x}if(e.common.async)return Promise.all(n.map(async a=>{const l={...e,common:{...e.common,issues:[]},parent:null};return{result:await a._parseAsync({data:e.data,path:e.path,parent:l}),ctx:l}})).then(o);{let a;const l=[];for(const d of n){const c={...e,common:{...e.common,issues:[]},parent:null},f=d._parseSync({data:e.data,path:e.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:c}),c.common.issues.length&&l.push(c.common.issues)}if(a)return e.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(d=>new j(d));return C(e,{code:v.invalid_union,unionErrors:u}),x}}get options(){return this._def.options}}Fe.create=(i,t)=>new Fe({options:i,typeName:I.ZodUnion,...R(t)});function Qe(i,t){const e=ee(i),n=ee(t);if(i===t)return{valid:!0,data:i};if(e===T.object&&n===T.object){const o=L.objectKeys(t),a=L.objectKeys(i).filter(u=>o.indexOf(u)!==-1),l={...i,...t};for(const u of a){const d=Qe(i[u],t[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(e===T.array&&n===T.array){if(i.length!==t.length)return{valid:!1};const o=[];for(let a=0;a<i.length;a++){const l=i[a],u=t[a],d=Qe(l,u);if(!d.valid)return{valid:!1};o.push(d.data)}return{valid:!0,data:o}}else return e===T.date&&n===T.date&&+i==+t?{valid:!0,data:i}:{valid:!1}}class Ue extends D{_parse(t){const{status:e,ctx:n}=this._processInputParams(t),o=(a,l)=>{if(At(a)||At(l))return x;const u=Qe(a.value,l.value);return u.valid?((It(a)||It(l))&&e.dirty(),{status:e.value,value:u.data}):(C(n,{code:v.invalid_intersection_types}),x)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,l])=>o(a,l)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ue.create=(i,t,e)=>new Ue({left:i,right:t,typeName:I.ZodIntersection,...R(e)});class le extends D{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==T.array)return C(n,{code:v.invalid_type,expected:T.array,received:n.parsedType}),x;if(n.data.length<this._def.items.length)return C(n,{code:v.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),x;!this._def.rest&&n.data.length>this._def.items.length&&(C(n,{code:v.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const a=[...n.data].map((l,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new X(n,l,n.path,u)):null}).filter(l=>!!l);return n.common.async?Promise.all(a).then(l=>J.mergeArray(e,l)):J.mergeArray(e,a)}get items(){return this._def.items}rest(t){return new le({...this._def,rest:t})}}le.create=(i,t)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new le({items:i,typeName:I.ZodTuple,rest:null,...R(t)})};class be extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==T.object)return C(n,{code:v.invalid_type,expected:T.object,received:n.parsedType}),x;const o=[],a=this._def.keyType,l=this._def.valueType;for(const u in n.data)o.push({key:a._parse(new X(n,u,n.path,u)),value:l._parse(new X(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?J.mergeObjectAsync(e,o):J.mergeObjectSync(e,o)}get element(){return this._def.valueType}static create(t,e,n){return e instanceof D?new be({keyType:t,valueType:e,typeName:I.ZodRecord,...R(n)}):new be({keyType:Z.create(),valueType:t,typeName:I.ZodRecord,...R(e)})}}class Nt extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==T.map)return C(n,{code:v.invalid_type,expected:T.map,received:n.parsedType}),x;const o=this._def.keyType,a=this._def.valueType,l=[...n.data.entries()].map(([u,d],c)=>({key:o._parse(new X(n,u,n.path,[c,"key"])),value:a._parse(new X(n,d,n.path,[c,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of l){const c=await d.key,f=await d.value;if(c.status==="aborted"||f.status==="aborted")return x;(c.status==="dirty"||f.status==="dirty")&&e.dirty(),u.set(c.value,f.value)}return{status:e.value,value:u}})}else{const u=new Map;for(const d of l){const c=d.key,f=d.value;if(c.status==="aborted"||f.status==="aborted")return x;(c.status==="dirty"||f.status==="dirty")&&e.dirty(),u.set(c.value,f.value)}return{status:e.value,value:u}}}}Nt.create=(i,t,e)=>new Nt({valueType:t,keyType:i,typeName:I.ZodMap,...R(e)});class xe extends D{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==T.set)return C(n,{code:v.invalid_type,expected:T.set,received:n.parsedType}),x;const o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(C(n,{code:v.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),e.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(C(n,{code:v.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),e.dirty());const a=this._def.valueType;function l(d){const c=new Set;for(const f of d){if(f.status==="aborted")return x;f.status==="dirty"&&e.dirty(),c.add(f.value)}return{status:e.value,value:c}}const u=[...n.data.values()].map((d,c)=>a._parse(new X(n,d,n.path,c)));return n.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(t,e){return new xe({...this._def,minSize:{value:t,message:E.toString(e)}})}max(t,e){return new xe({...this._def,maxSize:{value:t,message:E.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}xe.create=(i,t)=>new xe({valueType:i,minSize:null,maxSize:null,typeName:I.ZodSet,...R(t)});class je extends D{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}je.create=(i,t)=>new je({getter:i,typeName:I.ZodLazy,...R(t)});class Dt extends D{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return C(e,{received:e.data,code:v.invalid_literal,expected:this._def.value}),x}return{status:"valid",value:t.data}}get value(){return this._def.value}}Dt.create=(i,t)=>new Dt({value:i,typeName:I.ZodLiteral,...R(t)});function ti(i,t){return new ge({values:i,typeName:I.ZodEnum,...R(t)})}class ge extends D{_parse(t){if(typeof t.data!="string"){const e=this._getOrReturnCtx(t),n=this._def.values;return C(e,{expected:L.joinValues(n),received:e.parsedType,code:v.invalid_type}),x}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const e=this._getOrReturnCtx(t),n=this._def.values;return C(e,{received:e.data,code:v.invalid_enum_value,options:n}),x}return W(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return ge.create(t,{...this._def,...e})}exclude(t,e=this._def){return ge.create(this.options.filter(n=>!t.includes(n)),{...this._def,...e})}}ge.create=ti;class Vt extends D{_parse(t){const e=L.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==T.string&&n.parsedType!==T.number){const o=L.objectValues(e);return C(n,{expected:L.joinValues(o),received:n.parsedType,code:v.invalid_type}),x}if(this._cache||(this._cache=new Set(L.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const o=L.objectValues(e);return C(n,{received:n.data,code:v.invalid_enum_value,options:o}),x}return W(t.data)}get enum(){return this._def.values}}Vt.create=(i,t)=>new Vt({values:i,typeName:I.ZodNativeEnum,...R(t)});class Ge extends D{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==T.promise&&e.common.async===!1)return C(e,{code:v.invalid_type,expected:T.promise,received:e.parsedType}),x;const n=e.parsedType===T.promise?e.data:Promise.resolve(e.data);return W(n.then(o=>this._def.type.parseAsync(o,{path:e.path,errorMap:e.common.contextualErrorMap})))}}Ge.create=(i,t)=>new Ge({type:i,typeName:I.ZodPromise,...R(t)});class ye extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===I.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:n}=this._processInputParams(t),o=this._def.effect||null,a={addIssue:l=>{C(n,l),l.fatal?e.abort():e.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),o.type==="preprocess"){const l=o.transform(n.data,a);if(n.common.async)return Promise.resolve(l).then(async u=>{if(e.value==="aborted")return x;const d=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return d.status==="aborted"?x:d.status==="dirty"||e.value==="dirty"?Se(d.value):d});{if(e.value==="aborted")return x;const u=this._def.schema._parseSync({data:l,path:n.path,parent:n});return u.status==="aborted"?x:u.status==="dirty"||e.value==="dirty"?Se(u.value):u}}if(o.type==="refinement"){const l=u=>{const d=o.refinement(u,a);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?x:(u.status==="dirty"&&e.dirty(),l(u.value),{status:e.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?x:(u.status==="dirty"&&e.dirty(),l(u.value).then(()=>({status:e.value,value:u.value}))))}if(o.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!me(l))return x;const u=o.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>me(l)?Promise.resolve(o.transform(l.value,a)).then(u=>({status:e.value,value:u})):x);L.assertNever(o)}}ye.create=(i,t,e)=>new ye({schema:i,typeName:I.ZodEffects,effect:t,...R(e)});ye.createWithPreprocess=(i,t,e)=>new ye({schema:t,effect:{type:"preprocess",transform:i},typeName:I.ZodEffects,...R(e)});class te extends D{_parse(t){return this._getType(t)===T.undefined?W(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}te.create=(i,t)=>new te({innerType:i,typeName:I.ZodOptional,...R(t)});class ve extends D{_parse(t){return this._getType(t)===T.null?W(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ve.create=(i,t)=>new ve({innerType:i,typeName:I.ZodNullable,...R(t)});class et extends D{_parse(t){const{ctx:e}=this._processInputParams(t);let n=e.data;return e.parsedType===T.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}et.create=(i,t)=>new et({innerType:i,typeName:I.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...R(t)});class tt extends D{_parse(t){const{ctx:e}=this._processInputParams(t),n={...e,common:{...e.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ve(o)?o.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new j(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new j(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}tt.create=(i,t)=>new tt({innerType:i,typeName:I.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...R(t)});class Lt extends D{_parse(t){if(this._getType(t)!==T.nan){const n=this._getOrReturnCtx(t);return C(n,{code:v.invalid_type,expected:T.nan,received:n.parsedType}),x}return{status:"valid",value:t.data}}}Lt.create=i=>new Lt({typeName:I.ZodNaN,...R(i)});class uo extends D{_parse(t){const{ctx:e}=this._processInputParams(t),n=e.data;return this._def.type._parse({data:n,path:e.path,parent:e})}unwrap(){return this._def.type}}class pt extends D{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?x:a.status==="dirty"?(e.dirty(),Se(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?x:o.status==="dirty"?(e.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(t,e){return new pt({in:t,out:e,typeName:I.ZodPipeline})}}class nt extends D{_parse(t){const e=this._def.innerType._parse(t),n=o=>(me(o)&&(o.value=Object.freeze(o.value)),o);return Ve(e)?e.then(o=>n(o)):n(e)}unwrap(){return this._def.innerType}}nt.create=(i,t)=>new nt({innerType:i,typeName:I.ZodReadonly,...R(t)});var I;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(I||(I={}));const re=Z.create,Ft=se.create;ae.create;const co=Le.create;he.create;const Ut=Xe.create;ne.create;const Ae=z.create,fo=q.create,po=Fe.create;Ue.create;le.create;const mo=be.create,ho=je.create,go=ge.create;Ge.create;te.create;ve.create;const ue={string:i=>Z.create({...i,coerce:!0}),number:i=>se.create({...i,coerce:!0}),boolean:i=>Le.create({...i,coerce:!0}),bigint:i=>ae.create({...i,coerce:!0}),date:i=>he.create({...i,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yo,vo;function Co(){return{geminiUrl:yo,vertexUrl:vo}}function To(i,t,e){var n,o,a;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const l=Co();return i.vertexai?(o=l.vertexUrl)!==null&&o!==void 0?o:t:(a=l.geminiUrl)!==null&&a!==void 0?a:e}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Te{}function S(i,t){const e=/\{([^}]+)\}/g;return i.replace(e,(n,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const a=t[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function s(i,t,e){for(let a=0;a<t.length-1;a++){const l=t[a];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in i))if(Array.isArray(e))i[u]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(i[u])){const d=i[u];if(Array.isArray(e))for(let c=0;c<d.length;c++){const f=d[c];s(f,t.slice(a+1),e[c])}else for(const c of d)s(c,t.slice(a+1),e)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in i||(i[u]=[{}]);const d=i[u];s(d[0],t.slice(a+1),e);return}(!i[l]||typeof i[l]!="object")&&(i[l]={}),i=i[l]}const n=t[t.length-1],o=i[n];if(o!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===o)return;if(typeof o=="object"&&typeof e=="object"&&o!==null&&e!==null)Object.assign(o,e);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=e}function r(i,t){try{if(t.length===1&&t[0]==="_self")return i;for(let e=0;e<t.length;e++){if(typeof i!="object"||i===null)return;const n=t[e];if(n.endsWith("[]")){const o=n.slice(0,-2);if(o in i){const a=i[o];return Array.isArray(a)?a.map(l=>r(l,t.slice(e+1))):void 0}else return}else i=i[n]}return i}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bt;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(bt||(bt={}));var Gt;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Gt||(Gt={}));var K;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(K||(K={}));var qt;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(qt||(qt={}));var $t;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})($t||($t={}));var Bt;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Bt||(Bt={}));var Ht;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Ht||(Ht={}));var Jt;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Jt||(Jt={}));var Ot;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Ot||(Ot={}));var Wt;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Wt||(Wt={}));var Yt;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Yt||(Yt={}));var Zt;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Zt||(Zt={}));var Kt;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Kt||(Kt={}));var qe;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(qe||(qe={}));var zt;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(zt||(zt={}));var it;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(it||(it={}));var Xt;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Xt||(Xt={}));var Qt;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Qt||(Qt={}));var jt;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(jt||(jt={}));var en;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(en||(en={}));var tn;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(tn||(tn={}));var nn;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(nn||(nn={}));var on;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(on||(on={}));var rn;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(rn||(rn={}));var sn;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(sn||(sn={}));var an;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(an||(an={}));var ln;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ln||(ln={}));var un;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(un||(un={}));var cn;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cn||(cn={}));var dn;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(dn||(dn={}));var fn;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(fn||(fn={}));var pn;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(pn||(pn={}));var mn;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(mn||(mn={}));var hn;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(hn||(hn={}));var gn;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(gn||(gn={}));var yn;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(yn||(yn={}));var vn;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(vn||(vn={}));var Cn;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Cn||(Cn={}));var de;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(de||(de={}));class Ee{get text(){var t,e,n,o,a,l,u,d;if(((o=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const m of(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,g]of Object.entries(m))h!=="text"&&h!=="thought"&&(g!==null||g!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var t,e,n,o,a,l,u,d;if(((o=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,e,n,o,a,l,u,d;if(((o=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,e,n,o,a,l,u,d,c;if(((o=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,e,n,o,a,l,u,d,c;if(((o=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Tn{}class _n{}class _o{}class Eo{}class En{}class Sn{}class An{}class So{}class In{}class xn{}class Mn{}class Ao{}class ot{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Io{}class xo{}class Mo{get text(){var t,e,n;let o="",a=!1;const l=[];for(const u of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&l.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;a=!0,o+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var t,e,n;let o="";const a=[];for(const l of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[u,d]of Object.entries(l))u!=="inlineData"&&d!==null&&a.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class ko{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function ni(i,t){const e=b(i,t);return e?e.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:e.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${e}`:e:""}function ii(i,t){return Array.isArray(t)?t.map(e=>$e(i,e)):[$e(i,t)]}function $e(i,t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ro(i,t){const e=$e(i,t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function wo(i,t){const e=$e(i,t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function kn(i,t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function oi(i,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>kn(i,e)):[kn(i,t)]}function rt(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Rn(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function wn(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function H(i,t){if(t==null)throw new Error("ContentUnion is required");return rt(t)?t:{role:"user",parts:oi(i,t)}}function ri(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const n=H(i,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const e=H(i,t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>H(i,e)):[H(i,t)]}function Y(i,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Rn(t)||wn(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[H(i,t)]}const e=[],n=[],o=rt(t[0]);for(const a of t){const l=rt(a);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(Rn(a)||wn(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return o||e.push({role:"user",parts:oi(i,n)}),e}const Po=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Pn=go(["string","number","integer","object","array","boolean","null"]),No=po([Pn,Ae(Pn)]);function Do(i=!0){const t=ho(()=>{const e=fo({type:No.optional(),format:re().optional(),title:re().optional(),description:re().optional(),default:Ut().optional(),items:t.optional(),minItems:ue.string().optional(),maxItems:ue.string().optional(),enum:Ae(Ut()).optional(),properties:mo(re(),t).optional(),required:Ae(re()).optional(),minProperties:ue.string().optional(),maxProperties:ue.string().optional(),propertyOrdering:Ae(re()).optional(),minimum:Ft().optional(),maximum:Ft().optional(),minLength:ue.string().optional(),maxLength:ue.string().optional(),pattern:re().optional(),anyOf:Ae(t).optional(),additionalProperties:co().optional()});return i?e.strict():e});return t}function Vo(i,t){i.includes("null")&&(t.nullable=!0);const e=i.filter(n=>n!=="null");if(e.length===1)t.type=Object.values(K).includes(e[0].toUpperCase())?e[0].toUpperCase():K.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const n of e)t.anyOf.push({type:Object.values(K).includes(n.toUpperCase())?n.toUpperCase():K.TYPE_UNSPECIFIED})}}function fe(i){const t={},e=["items"],n=["anyOf"],o=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=i.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(t.nullable=!0,i=a[1]):a[1].type==="null"&&(t.nullable=!0,i=a[0])),i.type instanceof Array&&Vo(i.type,t);for(const[l,u]of Object.entries(i))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(K).includes(u.toUpperCase())?u.toUpperCase():K.TYPE_UNSPECIFIED}else if(e.includes(l))t[l]=fe(u);else if(n.includes(l)){const d=[];for(const c of u){if(c.type=="null"){t.nullable=!0;continue}d.push(fe(c))}t[l]=d}else if(o.includes(l)){const d={};for(const[c,f]of Object.entries(u))d[c]=fe(f);t[l]=d}else{if(l==="additionalProperties")continue;t[l]=u}return t}function Be(i,t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=Do().parse(t);return fe(e)}else return fe(t)}function si(i,t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function mt(i,t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Me(i,t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=Be(i,e.parameters)),e.response&&(e.response=Be(i,e.response));return t}function ke(i,t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Lo(i,t,e,n=1){const o=!t.startsWith(`${e}/`)&&t.split("/").length===n;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:o?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}/${t}`:t:o?`${e}/${t}`:t}function ie(i,t){if(typeof t!="string")throw new Error("name must be a string");return Lo(i,t,"cachedContents")}function ai(i,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function oe(i,t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Fo(i){return i!=null&&typeof i=="object"&&"name"in i}function Uo(i){return i!=null&&typeof i=="object"&&"video"in i}function bo(i){return i!=null&&typeof i=="object"&&"uri"in i}function li(i,t){var e;let n;if(Fo(t)&&(n=t.name),!(bo(t)&&(n=t.uri,n===void 0))&&!(Uo(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ui(i,t){let e;return i.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function ci(i,t){for(const e of["models","tunedModels","publisherModels"])if(Go(t,e))return t[e];return[]}function Go(i,t){return i!==null&&typeof i=="object"&&t in i}function qo(i,t={}){const e=i,n={name:e.name,description:e.description,parameters:fe(He(e.inputSchema))};return t.behavior&&(n.behavior=t.behavior),{functionDeclarations:[n]}}function $o(i,t={}){const e=[],n=new Set;for(const o of i){const a=o.name;if(n.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);n.add(a);const l=qo(o,t);l.functionDeclarations&&e.push(...l.functionDeclarations)}return{functionDeclarations:e}}function Bo(i){const t=[];for(const e of i)t.push(He(e));return t}function Ho(i){const t={};for(const[e,n]of Object.entries(i)){const o=n;t[e]=He(o)}return t}function He(i){const t=new Set(["items"]),e=new Set(["anyOf"]),n=new Set(["properties"]),o={};for(const[a,l]of Object.entries(i))if(t.has(a))o[a]=He(l);else if(e.has(a))o[a]=Bo(l);else if(n.has(a))o[a]=Ho(l);else if(a==="type"){const u=l.toUpperCase();o[a]=Object.values(K).includes(u)?u:K.TYPE_UNSPECIFIED}else Po.has(a)&&(o[a]=l);return o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jo(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function Oo(i,t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&s(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Wo(i,t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Yo(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Jo(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],Oo(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],Wo(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function Nn(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Yo(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function Zo(i,t){const e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=r(t,["description"]);o!=null&&s(e,["description"],o);const a=r(t,["name"]);a!=null&&s(e,["name"],a);const l=r(t,["parameters"]);l!=null&&s(e,["parameters"],l);const u=r(t,["response"]);return u!=null&&s(e,["response"],u),e}function Ko(i,t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=r(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function zo(i,t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Ko(i,n)),e}function Xo(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Qo(i,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Xo(i,n)),e}function jo(){return{}}function er(i,t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Zo(i,c))),s(e,["functionDeclarations"],d)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],zo(i,o));const a=r(t,["googleSearchRetrieval"]);if(a!=null&&s(e,["googleSearchRetrieval"],Qo(i,a)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],jo());const u=r(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function tr(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function nr(i,t){const e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=r(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function ir(i,t){const e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],nr(i,n));const o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function or(i,t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],tr(i,n));const o=r(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],ir(i,o)),e}function rr(i,t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const a=r(t,["expireTime"]);e!==void 0&&a!=null&&s(e,["expireTime"],a);const l=r(t,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const u=r(t,["contents"]);if(e!==void 0&&u!=null){let p=Y(i,u);Array.isArray(p)&&(p=p.map(m=>Nn(i,m))),s(e,["contents"],p)}const d=r(t,["systemInstruction"]);e!==void 0&&d!=null&&s(e,["systemInstruction"],Nn(i,H(i,d)));const c=r(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>er(i,m))),s(e,["tools"],p)}const f=r(t,["toolConfig"]);if(e!==void 0&&f!=null&&s(e,["toolConfig"],or(i,f)),r(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function sr(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["model"],ni(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],rr(i,o,e)),e}function ar(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],ie(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function lr(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],ie(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function ur(i,t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const a=r(t,["expireTime"]);return e!==void 0&&a!=null&&s(e,["expireTime"],a),n}function cr(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],ie(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],ur(i,o,e)),e}function dr(i,t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);return e!==void 0&&a!=null&&s(e,["_query","pageToken"],a),n}function fr(i,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],dr(i,n,e)),e}function pr(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function mr(i,t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=r(t,["data"]);o!=null&&s(e,["data"],o);const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function hr(i,t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=r(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function gr(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],pr(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],mr(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],hr(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function Dn(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>gr(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function yr(i,t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&s(e,["description"],n);const o=r(t,["name"]);o!=null&&s(e,["name"],o);const a=r(t,["parameters"]);a!=null&&s(e,["parameters"],a);const l=r(t,["response"]);return l!=null&&s(e,["response"],l),e}function vr(i,t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=r(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Cr(i,t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],vr(i,n)),e}function Tr(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function _r(i,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Tr(i,n)),e}function Er(){return{}}function Sr(i,t){const e={},n=r(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function Ar(i,t){const e={},n=r(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],Sr(i,n));const o=r(t,["authType"]);o!=null&&s(e,["authType"],o);const a=r(t,["googleServiceAccountConfig"]);a!=null&&s(e,["googleServiceAccountConfig"],a);const l=r(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const u=r(t,["oauthConfig"]);u!=null&&s(e,["oauthConfig"],u);const d=r(t,["oidcConfig"]);return d!=null&&s(e,["oidcConfig"],d),e}function Ir(i,t){const e={},n=r(t,["authConfig"]);return n!=null&&s(e,["authConfig"],Ar(i,n)),e}function xr(){return{}}function Mr(i,t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>yr(i,m))),s(e,["functionDeclarations"],p)}const o=r(t,["retrieval"]);o!=null&&s(e,["retrieval"],o);const a=r(t,["googleSearch"]);a!=null&&s(e,["googleSearch"],Cr(i,a));const l=r(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],_r(i,l)),r(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],Er());const d=r(t,["googleMaps"]);d!=null&&s(e,["googleMaps"],Ir(i,d)),r(t,["urlContext"])!=null&&s(e,["urlContext"],xr());const f=r(t,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function kr(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Rr(i,t){const e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=r(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function wr(i,t){const e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],Rr(i,n));const o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Pr(i,t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],kr(i,n));const o=r(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],wr(i,o)),e}function Nr(i,t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const a=r(t,["expireTime"]);e!==void 0&&a!=null&&s(e,["expireTime"],a);const l=r(t,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const u=r(t,["contents"]);if(e!==void 0&&u!=null){let m=Y(i,u);Array.isArray(m)&&(m=m.map(h=>Dn(i,h))),s(e,["contents"],m)}const d=r(t,["systemInstruction"]);e!==void 0&&d!=null&&s(e,["systemInstruction"],Dn(i,H(i,d)));const c=r(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>Mr(i,h))),s(e,["tools"],m)}const f=r(t,["toolConfig"]);e!==void 0&&f!=null&&s(e,["toolConfig"],Pr(i,f));const p=r(t,["kmsKeyName"]);return e!==void 0&&p!=null&&s(e,["encryption_spec","kmsKeyName"],p),n}function Dr(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["model"],ni(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],Nr(i,o,e)),e}function Vr(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],ie(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function Lr(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],ie(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function Fr(i,t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const a=r(t,["expireTime"]);return e!==void 0&&a!=null&&s(e,["expireTime"],a),n}function Ur(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],ie(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],Fr(i,o,e)),e}function br(i,t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);return e!==void 0&&a!=null&&s(e,["_query","pageToken"],a),n}function Gr(i,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],br(i,n,e)),e}function Pe(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["displayName"]);o!=null&&s(e,["displayName"],o);const a=r(t,["model"]);a!=null&&s(e,["model"],a);const l=r(t,["createTime"]);l!=null&&s(e,["createTime"],l);const u=r(t,["updateTime"]);u!=null&&s(e,["updateTime"],u);const d=r(t,["expireTime"]);d!=null&&s(e,["expireTime"],d);const c=r(t,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function qr(){return{}}function $r(i,t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=r(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Pe(i,l))),s(e,["cachedContents"],a)}return e}function Ne(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["displayName"]);o!=null&&s(e,["displayName"],o);const a=r(t,["model"]);a!=null&&s(e,["model"],a);const l=r(t,["createTime"]);l!=null&&s(e,["createTime"],l);const u=r(t,["updateTime"]);u!=null&&s(e,["updateTime"],u);const d=r(t,["expireTime"]);d!=null&&s(e,["expireTime"],d);const c=r(t,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function Br(){return{}}function Hr(i,t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=r(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Ne(i,l))),s(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ce;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ce||(Ce={}));class Je{constructor(t,e,n,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,n,o)}init(t,e,n){var o,a;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};n?typeof n=="object"?l=Object.assign({},n):l=n:l={config:{}},l.config&&(l.config.pageToken=e.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jr extends Te{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Je(Ce.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(e),e)}async create(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Dr(this.apiClient,t);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>Ne(this.apiClient,f))}else{const c=sr(this.apiClient,t);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Pe(this.apiClient,f))}}async get(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Vr(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>Ne(this.apiClient,f))}else{const c=ar(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Pe(this.apiClient,f))}}async delete(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Lr(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Br(),p=new xn;return Object.assign(p,f),p})}else{const c=lr(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(()=>{const f=qr(),p=new xn;return Object.assign(p,f),p})}}async update(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ur(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>Ne(this.apiClient,f))}else{const c=cr(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Pe(this.apiClient,f))}}async listInternal(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Gr(this.apiClient,t);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Hr(this.apiClient,f),m=new Mn;return Object.assign(m,p),m})}else{const c=fr(this.apiClient,t);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=$r(this.apiClient,f),m=new Mn;return Object.assign(m,p),m})}}}function Vn(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function G(i){return this instanceof G?(this.v=i,this):new G(i)}function pe(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(h){return function(g){return Promise.resolve(g).then(h,p)}}function u(h,g){n[h]&&(o[h]=function(y){return new Promise(function(_,A){a.push([h,y,_,A])>1||d(h,y)})},g&&(o[h]=g(o[h])))}function d(h,g){try{c(n[h](g))}catch(y){m(a[0][3],y)}}function c(h){h.value instanceof G?Promise.resolve(h.value.v).then(f,p):m(a[0][2],h)}function f(h){d("next",h)}function p(h){d("throw",h)}function m(h,g){h(g),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Ie(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof Vn=="function"?Vn(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(a){e[a]=i[a]&&function(l){return new Promise(function(u,d){l=i[a](l),o(u,d,l.done,l.value)})}}function o(a,l,u,d){Promise.resolve(d).then(function(c){a({value:c,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Or(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const e=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:di(e)}function di(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function Wr(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Ln(i){if(i===void 0||i.length===0)return[];const t=[],e=i.length;let n=0;for(;n<e;)if(i[n].role==="user")t.push(i[n]),n++;else{const o=[];let a=!0;for(;n<e&&i[n].role==="model";)o.push(i[n]),a&&!di(i[n])&&(a=!1),n++;a?t.push(...o):t.pop()}return t}class Yr{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new Zr(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Zr{constructor(t,e,n,o={},a=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),Wr(a)}async sendMessage(t){var e;await this.sendPromise;const n=H(this.apiClient,t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var a,l,u;const d=await o,c=(l=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const h=c?[c]:[];this.recordHistory(n,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var e;await this.sendPromise;const n=H(this.apiClient,t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,n)}getHistory(t=!1){const e=t?Ln(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){var n,o;return pe(this,arguments,function*(){var l,u,d,c;const f=[];try{for(var p=!0,m=Ie(t),h;h=yield G(m.next()),l=h.done,!l;p=!0){c=h.value,p=!1;const g=c;if(Or(g)){const y=(o=(n=g.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content;y!==void 0&&f.push(y)}yield yield G(g)}}catch(g){u={error:g}}finally{try{!p&&!l&&(d=m.return)&&(yield G(d.call(m)))}finally{if(u)throw u.error}}this.recordHistory(e,f)})}recordHistory(t,e,n){let o=[];e.length>0&&e.every(a=>a.role!==void 0)?o=e:o.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Ln(n)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kr(i,t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);return e!==void 0&&a!=null&&s(e,["_query","pageToken"],a),n}function zr(i,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Kr(i,n,e)),e}function Xr(i,t){const e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);const o=r(t,["message"]);o!=null&&s(e,["message"],o);const a=r(t,["code"]);return a!=null&&s(e,["code"],a),e}function Qr(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["displayName"]);o!=null&&s(e,["displayName"],o);const a=r(t,["mimeType"]);a!=null&&s(e,["mimeType"],a);const l=r(t,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const u=r(t,["createTime"]);u!=null&&s(e,["createTime"],u);const d=r(t,["expirationTime"]);d!=null&&s(e,["expirationTime"],d);const c=r(t,["updateTime"]);c!=null&&s(e,["updateTime"],c);const f=r(t,["sha256Hash"]);f!=null&&s(e,["sha256Hash"],f);const p=r(t,["uri"]);p!=null&&s(e,["uri"],p);const m=r(t,["downloadUri"]);m!=null&&s(e,["downloadUri"],m);const h=r(t,["state"]);h!=null&&s(e,["state"],h);const g=r(t,["source"]);g!=null&&s(e,["source"],g);const y=r(t,["videoMetadata"]);y!=null&&s(e,["videoMetadata"],y);const _=r(t,["error"]);return _!=null&&s(e,["error"],Xr(i,_)),e}function jr(i,t){const e={},n=r(t,["file"]);n!=null&&s(e,["file"],Qr(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function es(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","file"],li(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function ts(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","file"],li(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function ns(i,t){const e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);const o=r(t,["message"]);o!=null&&s(e,["message"],o);const a=r(t,["code"]);return a!=null&&s(e,["code"],a),e}function st(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["displayName"]);o!=null&&s(e,["displayName"],o);const a=r(t,["mimeType"]);a!=null&&s(e,["mimeType"],a);const l=r(t,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const u=r(t,["createTime"]);u!=null&&s(e,["createTime"],u);const d=r(t,["expirationTime"]);d!=null&&s(e,["expirationTime"],d);const c=r(t,["updateTime"]);c!=null&&s(e,["updateTime"],c);const f=r(t,["sha256Hash"]);f!=null&&s(e,["sha256Hash"],f);const p=r(t,["uri"]);p!=null&&s(e,["uri"],p);const m=r(t,["downloadUri"]);m!=null&&s(e,["downloadUri"],m);const h=r(t,["state"]);h!=null&&s(e,["state"],h);const g=r(t,["source"]);g!=null&&s(e,["source"],g);const y=r(t,["videoMetadata"]);y!=null&&s(e,["videoMetadata"],y);const _=r(t,["error"]);return _!=null&&s(e,["error"],ns(i,_)),e}function is(i,t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=r(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>st(i,l))),s(e,["files"],a)}return e}function os(){return{}}function rs(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ss extends Te{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Je(Ce.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>st(this.apiClient,e))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=zr(this.apiClient,t);return a=S("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=is(this.apiClient,d),f=new Ao;return Object.assign(f,c),f})}}async createInternal(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jr(this.apiClient,t);return a=S("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(()=>{const d=os(),c=new Io;return Object.assign(c,d),c})}}async get(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=es(this.apiClient,t);return a=S("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>st(this.apiClient,d))}}async delete(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ts(this.apiClient,t);return a=S("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(()=>{const d=rs(),c=new xo;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function as(i,t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function ls(i,t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function fi(i,t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],as(i,n)),e}function us(i,t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],ls(i,n)),e}function cs(i,t){const e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);const o=r(t,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],fi(i,o)),e}function ds(i,t){const e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>cs(i,a))),s(e,["speakerVoiceConfigs"],o)}return e}function fs(i,t){const e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],fi(i,n));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],ds(i,o));const a=r(t,["languageCode"]);return a!=null&&s(e,["languageCode"],a),e}function ps(i,t){const e={},n=r(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],us(i,n)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function ms(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function hs(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function gs(i,t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&s(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ys(i,t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=r(t,["data"]);o!=null&&s(e,["data"],o);const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function vs(i,t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Cs(i,t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=r(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function Ts(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ms(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],gs(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],vs(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function _s(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],hs(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],ys(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],Cs(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function Es(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Ts(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function Ss(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>_s(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function As(i,t){const e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=r(t,["description"]);o!=null&&s(e,["description"],o);const a=r(t,["name"]);a!=null&&s(e,["name"],a);const l=r(t,["parameters"]);l!=null&&s(e,["parameters"],l);const u=r(t,["response"]);return u!=null&&s(e,["response"],u),e}function Is(i,t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&s(e,["description"],n);const o=r(t,["name"]);o!=null&&s(e,["name"],o);const a=r(t,["parameters"]);a!=null&&s(e,["parameters"],a);const l=r(t,["response"]);return l!=null&&s(e,["response"],l),e}function xs(i,t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=r(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Ms(i,t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=r(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function ks(i,t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],xs(i,n)),e}function Rs(i,t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Ms(i,n)),e}function ws(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Ps(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Ns(i,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],ws(i,n)),e}function Ds(i,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Ps(i,n)),e}function Vs(){return{}}function Ls(i,t){const e={},n=r(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function Fs(i,t){const e={},n=r(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],Ls(i,n));const o=r(t,["authType"]);o!=null&&s(e,["authType"],o);const a=r(t,["googleServiceAccountConfig"]);a!=null&&s(e,["googleServiceAccountConfig"],a);const l=r(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const u=r(t,["oauthConfig"]);u!=null&&s(e,["oauthConfig"],u);const d=r(t,["oidcConfig"]);return d!=null&&s(e,["oidcConfig"],d),e}function Us(i,t){const e={},n=r(t,["authConfig"]);return n!=null&&s(e,["authConfig"],Fs(i,n)),e}function bs(){return{}}function Gs(){return{}}function qs(i,t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>As(i,c))),s(e,["functionDeclarations"],d)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],ks(i,o));const a=r(t,["googleSearchRetrieval"]);if(a!=null&&s(e,["googleSearchRetrieval"],Ns(i,a)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],bs());const u=r(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function $s(i,t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Is(i,m))),s(e,["functionDeclarations"],p)}const o=r(t,["retrieval"]);o!=null&&s(e,["retrieval"],o);const a=r(t,["googleSearch"]);a!=null&&s(e,["googleSearch"],Rs(i,a));const l=r(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Ds(i,l)),r(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],Vs());const d=r(t,["googleMaps"]);d!=null&&s(e,["googleMaps"],Us(i,d)),r(t,["urlContext"])!=null&&s(e,["urlContext"],Gs());const f=r(t,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function Bs(i,t){const e={},n=r(t,["handle"]);if(n!=null&&s(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Hs(i,t){const e={},n=r(t,["handle"]);n!=null&&s(e,["handle"],n);const o=r(t,["transparent"]);return o!=null&&s(e,["transparent"],o),e}function Fn(){return{}}function Un(){return{}}function Js(i,t){const e={},n=r(t,["disabled"]);n!=null&&s(e,["disabled"],n);const o=r(t,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const a=r(t,["endOfSpeechSensitivity"]);a!=null&&s(e,["endOfSpeechSensitivity"],a);const l=r(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const u=r(t,["silenceDurationMs"]);return u!=null&&s(e,["silenceDurationMs"],u),e}function Os(i,t){const e={},n=r(t,["disabled"]);n!=null&&s(e,["disabled"],n);const o=r(t,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const a=r(t,["endOfSpeechSensitivity"]);a!=null&&s(e,["endOfSpeechSensitivity"],a);const l=r(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const u=r(t,["silenceDurationMs"]);return u!=null&&s(e,["silenceDurationMs"],u),e}function Ws(i,t){const e={},n=r(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],Js(i,n));const o=r(t,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const a=r(t,["turnCoverage"]);return a!=null&&s(e,["turnCoverage"],a),e}function Ys(i,t){const e={},n=r(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],Os(i,n));const o=r(t,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const a=r(t,["turnCoverage"]);return a!=null&&s(e,["turnCoverage"],a),e}function Zs(i,t){const e={},n=r(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function Ks(i,t){const e={},n=r(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function zs(i,t){const e={},n=r(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const o=r(t,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Zs(i,o)),e}function Xs(i,t){const e={},n=r(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const o=r(t,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Ks(i,o)),e}function Qs(i,t){const e={},n=r(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function js(i,t){const e={},n=r(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function ea(i,t,e){const n={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const a=r(t,["responseModalities"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","responseModalities"],a);const l=r(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const u=r(t,["topP"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topP"],u);const d=r(t,["topK"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","topK"],d);const c=r(t,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const f=r(t,["mediaResolution"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","mediaResolution"],f);const p=r(t,["seed"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","seed"],p);const m=r(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],fs(i,mt(i,m)));const h=r(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(t,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Es(i,H(i,g)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let V=ke(i,y);Array.isArray(V)&&(V=V.map(U=>qs(i,Me(i,U)))),s(e,["setup","tools"],V)}const _=r(t,["sessionResumption"]);e!==void 0&&_!=null&&s(e,["setup","sessionResumption"],Bs(i,_));const A=r(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&s(e,["setup","inputAudioTranscription"],Fn());const M=r(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&s(e,["setup","outputAudioTranscription"],Fn());const k=r(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],Ws(i,k));const P=r(t,["contextWindowCompression"]);e!==void 0&&P!=null&&s(e,["setup","contextWindowCompression"],zs(i,P));const N=r(t,["proactivity"]);return e!==void 0&&N!=null&&s(e,["setup","proactivity"],Qs(i,N)),n}function ta(i,t,e){const n={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const a=r(t,["responseModalities"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","responseModalities"],a);const l=r(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const u=r(t,["topP"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topP"],u);const d=r(t,["topK"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","topK"],d);const c=r(t,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const f=r(t,["mediaResolution"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","mediaResolution"],f);const p=r(t,["seed"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","seed"],p);const m=r(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],ps(i,mt(i,m)));const h=r(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(t,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Ss(i,H(i,g)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let V=ke(i,y);Array.isArray(V)&&(V=V.map(U=>$s(i,Me(i,U)))),s(e,["setup","tools"],V)}const _=r(t,["sessionResumption"]);e!==void 0&&_!=null&&s(e,["setup","sessionResumption"],Hs(i,_));const A=r(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&s(e,["setup","inputAudioTranscription"],Un());const M=r(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&s(e,["setup","outputAudioTranscription"],Un());const k=r(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],Ys(i,k));const P=r(t,["contextWindowCompression"]);e!==void 0&&P!=null&&s(e,["setup","contextWindowCompression"],Xs(i,P));const N=r(t,["proactivity"]);return e!==void 0&&N!=null&&s(e,["setup","proactivity"],js(i,N)),n}function na(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["setup","model"],b(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],ea(i,o,e)),e}function ia(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["setup","model"],b(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],ta(i,o,e)),e}function oa(){return{}}function ra(){return{}}function sa(){return{}}function aa(){return{}}function la(i,t){const e={},n=r(t,["media"]);n!=null&&s(e,["mediaChunks"],ii(i,n));const o=r(t,["audio"]);o!=null&&s(e,["audio"],wo(i,o));const a=r(t,["audioStreamEnd"]);a!=null&&s(e,["audioStreamEnd"],a);const l=r(t,["video"]);l!=null&&s(e,["video"],Ro(i,l));const u=r(t,["text"]);return u!=null&&s(e,["text"],u),r(t,["activityStart"])!=null&&s(e,["activityStart"],oa()),r(t,["activityEnd"])!=null&&s(e,["activityEnd"],sa()),e}function ua(i,t){const e={},n=r(t,["media"]);if(n!=null&&s(e,["mediaChunks"],ii(i,n)),r(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const o=r(t,["audioStreamEnd"]);if(o!=null&&s(e,["audioStreamEnd"],o),r(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(r(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return r(t,["activityStart"])!=null&&s(e,["activityStart"],ra()),r(t,["activityEnd"])!=null&&s(e,["activityEnd"],aa()),e}function pi(i,t){const e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);const o=r(t,["weight"]);return o!=null&&s(e,["weight"],o),e}function ca(i,t){const e={},n=r(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>pi(i,a))),s(e,["weightedPrompts"],o)}return e}function mi(i,t){const e={},n=r(t,["temperature"]);n!=null&&s(e,["temperature"],n);const o=r(t,["topK"]);o!=null&&s(e,["topK"],o);const a=r(t,["seed"]);a!=null&&s(e,["seed"],a);const l=r(t,["guidance"]);l!=null&&s(e,["guidance"],l);const u=r(t,["bpm"]);u!=null&&s(e,["bpm"],u);const d=r(t,["density"]);d!=null&&s(e,["density"],d);const c=r(t,["brightness"]);c!=null&&s(e,["brightness"],c);const f=r(t,["scale"]);f!=null&&s(e,["scale"],f);const p=r(t,["muteBass"]);p!=null&&s(e,["muteBass"],p);const m=r(t,["muteDrums"]);m!=null&&s(e,["muteDrums"],m);const h=r(t,["onlyBassAndDrums"]);return h!=null&&s(e,["onlyBassAndDrums"],h),e}function da(i,t){const e={},n=r(t,["musicGenerationConfig"]);return n!=null&&s(e,["musicGenerationConfig"],mi(i,n)),e}function hi(i,t){const e={},n=r(t,["model"]);return n!=null&&s(e,["model"],n),e}function gi(i,t){const e={},n=r(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>pi(i,a))),s(e,["weightedPrompts"],o)}return e}function at(i,t){const e={},n=r(t,["setup"]);n!=null&&s(e,["setup"],hi(i,n));const o=r(t,["clientContent"]);o!=null&&s(e,["clientContent"],gi(i,o));const a=r(t,["musicGenerationConfig"]);a!=null&&s(e,["musicGenerationConfig"],mi(i,a));const l=r(t,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function fa(){return{}}function pa(){return{}}function ma(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function ha(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function ga(i,t){const e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ya(i,t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=r(t,["data"]);o!=null&&s(e,["data"],o);const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function va(i,t){const e={},n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ca(i,t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=r(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function Ta(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ma(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],ga(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],va(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function _a(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ha(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],ya(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],Ca(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function Ea(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Ta(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function Sa(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>_a(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function bn(i,t){const e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);const o=r(t,["finished"]);return o!=null&&s(e,["finished"],o),e}function Gn(i,t){const e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);const o=r(t,["finished"]);return o!=null&&s(e,["finished"],o),e}function Aa(i,t){const e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const o=r(t,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Ia(i,t){const e={},n=r(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Aa(i,a))),s(e,["urlMetadata"],o)}return e}function xa(i,t){const e={},n=r(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],Ea(i,n));const o=r(t,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const a=r(t,["interrupted"]);a!=null&&s(e,["interrupted"],a);const l=r(t,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const u=r(t,["generationComplete"]);u!=null&&s(e,["generationComplete"],u);const d=r(t,["inputTranscription"]);d!=null&&s(e,["inputTranscription"],bn(i,d));const c=r(t,["outputTranscription"]);c!=null&&s(e,["outputTranscription"],bn(i,c));const f=r(t,["urlContextMetadata"]);return f!=null&&s(e,["urlContextMetadata"],Ia(i,f)),e}function Ma(i,t){const e={},n=r(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],Sa(i,n));const o=r(t,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const a=r(t,["interrupted"]);a!=null&&s(e,["interrupted"],a);const l=r(t,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const u=r(t,["generationComplete"]);u!=null&&s(e,["generationComplete"],u);const d=r(t,["inputTranscription"]);d!=null&&s(e,["inputTranscription"],Gn(i,d));const c=r(t,["outputTranscription"]);return c!=null&&s(e,["outputTranscription"],Gn(i,c)),e}function ka(i,t){const e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);const o=r(t,["args"]);o!=null&&s(e,["args"],o);const a=r(t,["name"]);return a!=null&&s(e,["name"],a),e}function Ra(i,t){const e={},n=r(t,["args"]);n!=null&&s(e,["args"],n);const o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function wa(i,t){const e={},n=r(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>ka(i,a))),s(e,["functionCalls"],o)}return e}function Pa(i,t){const e={},n=r(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Ra(i,a))),s(e,["functionCalls"],o)}return e}function Na(i,t){const e={},n=r(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function Da(i,t){const e={},n=r(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function Re(i,t){const e={},n=r(t,["modality"]);n!=null&&s(e,["modality"],n);const o=r(t,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function we(i,t){const e={},n=r(t,["modality"]);n!=null&&s(e,["modality"],n);const o=r(t,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function Va(i,t){const e={},n=r(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);const o=r(t,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const a=r(t,["responseTokenCount"]);a!=null&&s(e,["responseTokenCount"],a);const l=r(t,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const u=r(t,["thoughtsTokenCount"]);u!=null&&s(e,["thoughtsTokenCount"],u);const d=r(t,["totalTokenCount"]);d!=null&&s(e,["totalTokenCount"],d);const c=r(t,["promptTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>Re(i,g))),s(e,["promptTokensDetails"],h)}const f=r(t,["cacheTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>Re(i,g))),s(e,["cacheTokensDetails"],h)}const p=r(t,["responseTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>Re(i,g))),s(e,["responseTokensDetails"],h)}const m=r(t,["toolUsePromptTokensDetails"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>Re(i,g))),s(e,["toolUsePromptTokensDetails"],h)}return e}function La(i,t){const e={},n=r(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);const o=r(t,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const a=r(t,["candidatesTokenCount"]);a!=null&&s(e,["responseTokenCount"],a);const l=r(t,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const u=r(t,["thoughtsTokenCount"]);u!=null&&s(e,["thoughtsTokenCount"],u);const d=r(t,["totalTokenCount"]);d!=null&&s(e,["totalTokenCount"],d);const c=r(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>we(i,y))),s(e,["promptTokensDetails"],g)}const f=r(t,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>we(i,y))),s(e,["cacheTokensDetails"],g)}const p=r(t,["candidatesTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>we(i,y))),s(e,["responseTokensDetails"],g)}const m=r(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>we(i,y))),s(e,["toolUsePromptTokensDetails"],g)}const h=r(t,["trafficType"]);return h!=null&&s(e,["trafficType"],h),e}function Fa(i,t){const e={},n=r(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function Ua(i,t){const e={},n=r(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function ba(i,t){const e={},n=r(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);const o=r(t,["resumable"]);o!=null&&s(e,["resumable"],o);const a=r(t,["lastConsumedClientMessageIndex"]);return a!=null&&s(e,["lastConsumedClientMessageIndex"],a),e}function Ga(i,t){const e={},n=r(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);const o=r(t,["resumable"]);o!=null&&s(e,["resumable"],o);const a=r(t,["lastConsumedClientMessageIndex"]);return a!=null&&s(e,["lastConsumedClientMessageIndex"],a),e}function qa(i,t){const e={};r(t,["setupComplete"])!=null&&s(e,["setupComplete"],fa());const o=r(t,["serverContent"]);o!=null&&s(e,["serverContent"],xa(i,o));const a=r(t,["toolCall"]);a!=null&&s(e,["toolCall"],wa(i,a));const l=r(t,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Na(i,l));const u=r(t,["usageMetadata"]);u!=null&&s(e,["usageMetadata"],Va(i,u));const d=r(t,["goAway"]);d!=null&&s(e,["goAway"],Fa(i,d));const c=r(t,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],ba(i,c)),e}function $a(i,t){const e={};r(t,["setupComplete"])!=null&&s(e,["setupComplete"],pa());const o=r(t,["serverContent"]);o!=null&&s(e,["serverContent"],Ma(i,o));const a=r(t,["toolCall"]);a!=null&&s(e,["toolCall"],Pa(i,a));const l=r(t,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Da(i,l));const u=r(t,["usageMetadata"]);u!=null&&s(e,["usageMetadata"],La(i,u));const d=r(t,["goAway"]);d!=null&&s(e,["goAway"],Ua(i,d));const c=r(t,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],Ga(i,c)),e}function Ba(){return{}}function Ha(i,t){const e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);const o=r(t,["weight"]);return o!=null&&s(e,["weight"],o),e}function Ja(i,t){const e={},n=r(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Ha(i,a))),s(e,["weightedPrompts"],o)}return e}function Oa(i,t){const e={},n=r(t,["temperature"]);n!=null&&s(e,["temperature"],n);const o=r(t,["topK"]);o!=null&&s(e,["topK"],o);const a=r(t,["seed"]);a!=null&&s(e,["seed"],a);const l=r(t,["guidance"]);l!=null&&s(e,["guidance"],l);const u=r(t,["bpm"]);u!=null&&s(e,["bpm"],u);const d=r(t,["density"]);d!=null&&s(e,["density"],d);const c=r(t,["brightness"]);c!=null&&s(e,["brightness"],c);const f=r(t,["scale"]);f!=null&&s(e,["scale"],f);const p=r(t,["muteBass"]);p!=null&&s(e,["muteBass"],p);const m=r(t,["muteDrums"]);m!=null&&s(e,["muteDrums"],m);const h=r(t,["onlyBassAndDrums"]);return h!=null&&s(e,["onlyBassAndDrums"],h),e}function Wa(i,t){const e={},n=r(t,["clientContent"]);n!=null&&s(e,["clientContent"],Ja(i,n));const o=r(t,["musicGenerationConfig"]);return o!=null&&s(e,["musicGenerationConfig"],Oa(i,o)),e}function Ya(i,t){const e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);const o=r(t,["mimeType"]);o!=null&&s(e,["mimeType"],o);const a=r(t,["sourceMetadata"]);return a!=null&&s(e,["sourceMetadata"],Wa(i,a)),e}function Za(i,t){const e={},n=r(t,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Ya(i,a))),s(e,["audioChunks"],o)}return e}function Ka(i,t){const e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);const o=r(t,["filteredReason"]);return o!=null&&s(e,["filteredReason"],o),e}function za(i,t){const e={};r(t,["setupComplete"])!=null&&s(e,["setupComplete"],Ba());const o=r(t,["serverContent"]);o!=null&&s(e,["serverContent"],Za(i,o));const a=r(t,["filteredPrompt"]);return a!=null&&s(e,["filteredPrompt"],Ka(i,a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xa(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function Qa(i,t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&s(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ja(i,t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function el(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Xa(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],Qa(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],ja(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function Oe(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>el(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function tl(i,t){const e={},n=r(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const o=r(t,["default"]);o!=null&&s(e,["default"],o);const a=r(t,["description"]);a!=null&&s(e,["description"],a);const l=r(t,["enum"]);l!=null&&s(e,["enum"],l);const u=r(t,["example"]);u!=null&&s(e,["example"],u);const d=r(t,["format"]);d!=null&&s(e,["format"],d);const c=r(t,["items"]);c!=null&&s(e,["items"],c);const f=r(t,["maxItems"]);f!=null&&s(e,["maxItems"],f);const p=r(t,["maxLength"]);p!=null&&s(e,["maxLength"],p);const m=r(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);const h=r(t,["maximum"]);h!=null&&s(e,["maximum"],h);const g=r(t,["minItems"]);g!=null&&s(e,["minItems"],g);const y=r(t,["minLength"]);y!=null&&s(e,["minLength"],y);const _=r(t,["minProperties"]);_!=null&&s(e,["minProperties"],_);const A=r(t,["minimum"]);A!=null&&s(e,["minimum"],A);const M=r(t,["nullable"]);M!=null&&s(e,["nullable"],M);const k=r(t,["pattern"]);k!=null&&s(e,["pattern"],k);const P=r(t,["properties"]);P!=null&&s(e,["properties"],P);const N=r(t,["propertyOrdering"]);N!=null&&s(e,["propertyOrdering"],N);const V=r(t,["required"]);V!=null&&s(e,["required"],V);const U=r(t,["title"]);U!=null&&s(e,["title"],U);const $=r(t,["type"]);return $!=null&&s(e,["type"],$),e}function nl(i,t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(t,["category"]);n!=null&&s(e,["category"],n);const o=r(t,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function il(i,t){const e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=r(t,["description"]);o!=null&&s(e,["description"],o);const a=r(t,["name"]);a!=null&&s(e,["name"],a);const l=r(t,["parameters"]);l!=null&&s(e,["parameters"],l);const u=r(t,["response"]);return u!=null&&s(e,["response"],u),e}function ol(i,t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=r(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function rl(i,t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],ol(i,n)),e}function sl(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function al(i,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],sl(i,n)),e}function ll(){return{}}function ul(i,t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>il(i,c))),s(e,["functionDeclarations"],d)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],rl(i,o));const a=r(t,["googleSearchRetrieval"]);if(a!=null&&s(e,["googleSearchRetrieval"],al(i,a)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],ll());const u=r(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function cl(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function dl(i,t){const e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=r(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function fl(i,t){const e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],dl(i,n));const o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function pl(i,t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],cl(i,n));const o=r(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],fl(i,o)),e}function ml(i,t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function yi(i,t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],ml(i,n)),e}function hl(i,t){const e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);const o=r(t,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],yi(i,o)),e}function gl(i,t){const e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>hl(i,a))),s(e,["speakerVoiceConfigs"],o)}return e}function yl(i,t){const e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],yi(i,n));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],gl(i,o));const a=r(t,["languageCode"]);return a!=null&&s(e,["languageCode"],a),e}function vl(i,t){const e={},n=r(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const o=r(t,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Cl(i,t,e){const n={},o=r(t,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],Oe(i,H(i,o)));const a=r(t,["temperature"]);a!=null&&s(n,["temperature"],a);const l=r(t,["topP"]);l!=null&&s(n,["topP"],l);const u=r(t,["topK"]);u!=null&&s(n,["topK"],u);const d=r(t,["candidateCount"]);d!=null&&s(n,["candidateCount"],d);const c=r(t,["maxOutputTokens"]);c!=null&&s(n,["maxOutputTokens"],c);const f=r(t,["stopSequences"]);f!=null&&s(n,["stopSequences"],f);const p=r(t,["responseLogprobs"]);p!=null&&s(n,["responseLogprobs"],p);const m=r(t,["logprobs"]);m!=null&&s(n,["logprobs"],m);const h=r(t,["presencePenalty"]);h!=null&&s(n,["presencePenalty"],h);const g=r(t,["frequencyPenalty"]);g!=null&&s(n,["frequencyPenalty"],g);const y=r(t,["seed"]);y!=null&&s(n,["seed"],y);const _=r(t,["responseMimeType"]);_!=null&&s(n,["responseMimeType"],_);const A=r(t,["responseSchema"]);if(A!=null&&s(n,["responseSchema"],tl(i,Be(i,A))),r(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=r(t,["safetySettings"]);if(e!==void 0&&M!=null){let F=M;Array.isArray(F)&&(F=F.map(O=>nl(i,O))),s(e,["safetySettings"],F)}const k=r(t,["tools"]);if(e!==void 0&&k!=null){let F=ke(i,k);Array.isArray(F)&&(F=F.map(O=>ul(i,Me(i,O)))),s(e,["tools"],F)}const P=r(t,["toolConfig"]);if(e!==void 0&&P!=null&&s(e,["toolConfig"],pl(i,P)),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=r(t,["cachedContent"]);e!==void 0&&N!=null&&s(e,["cachedContent"],ie(i,N));const V=r(t,["responseModalities"]);V!=null&&s(n,["responseModalities"],V);const U=r(t,["mediaResolution"]);U!=null&&s(n,["mediaResolution"],U);const $=r(t,["speechConfig"]);if($!=null&&s(n,["speechConfig"],yl(i,si(i,$))),r(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const w=r(t,["thinkingConfig"]);return w!=null&&s(n,["thinkingConfig"],vl(i,w)),n}function qn(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["contents"]);if(o!=null){let l=Y(i,o);Array.isArray(l)&&(l=l.map(u=>Oe(i,u))),s(e,["contents"],l)}const a=r(t,["config"]);return a!=null&&s(e,["generationConfig"],Cl(i,a,e)),e}function Tl(i,t,e){const n={},o=r(t,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const a=r(t,["title"]);e!==void 0&&a!=null&&s(e,["requests[]","title"],a);const l=r(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function _l(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["contents"]);o!=null&&s(e,["requests[]","content"],ri(i,o));const a=r(t,["config"]);a!=null&&s(e,["config"],Tl(i,a,e));const l=r(t,["model"]);return l!==void 0&&s(e,["requests[]","model"],b(i,l)),e}function El(i,t,e){const n={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=r(t,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const a=r(t,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const l=r(t,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=r(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=r(t,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const c=r(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&s(e,["parameters","includeSafetyAttributes"],c);const f=r(t,["includeRaiReason"]);e!==void 0&&f!=null&&s(e,["parameters","includeRaiReason"],f);const p=r(t,["language"]);e!==void 0&&p!=null&&s(e,["parameters","language"],p);const m=r(t,["outputMimeType"]);e!==void 0&&m!=null&&s(e,["parameters","outputOptions","mimeType"],m);const h=r(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&s(e,["parameters","outputOptions","compressionQuality"],h),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Sl(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["prompt"]);o!=null&&s(e,["instances[0]","prompt"],o);const a=r(t,["config"]);return a!=null&&s(e,["config"],El(i,a,e)),e}function Al(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","name"],b(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function Il(i,t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);e!==void 0&&a!=null&&s(e,["_query","pageToken"],a);const l=r(t,["filter"]);e!==void 0&&l!=null&&s(e,["_query","filter"],l);const u=r(t,["queryBase"]);return e!==void 0&&u!=null&&s(e,["_url","models_url"],ui(i,u)),n}function xl(i,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Il(i,n,e)),e}function Ml(i,t,e){const n={},o=r(t,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const a=r(t,["description"]);e!==void 0&&a!=null&&s(e,["description"],a);const l=r(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),n}function kl(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","name"],b(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],Ml(i,o,e)),e}function Rl(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","name"],b(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function wl(i,t){const e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Pl(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["contents"]);if(o!=null){let l=Y(i,o);Array.isArray(l)&&(l=l.map(u=>Oe(i,u))),s(e,["contents"],l)}const a=r(t,["config"]);return a!=null&&s(e,["config"],wl(i,a)),e}function Nl(i,t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(t,["imageBytes"]);n!=null&&s(e,["bytesBase64Encoded"],oe(i,n));const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Dl(i,t,e){const n={},o=r(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=r(t,["durationSeconds"]);if(e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=r(t,["aspectRatio"]);if(e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l),r(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=r(t,["personGeneration"]);if(e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=r(t,["negativePrompt"]);e!==void 0&&d!=null&&s(e,["parameters","negativePrompt"],d);const c=r(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&s(e,["parameters","enhancePrompt"],c),r(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return n}function Vl(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["prompt"]);o!=null&&s(e,["instances[0]","prompt"],o);const a=r(t,["image"]);a!=null&&s(e,["instances[0]","image"],Nl(i,a));const l=r(t,["config"]);return l!=null&&s(e,["config"],Dl(i,l,e)),e}function Ll(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function Fl(i,t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=r(t,["data"]);o!=null&&s(e,["data"],o);const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function Ul(i,t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=r(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function bl(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Ll(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],Fl(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],Ul(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function _e(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>bl(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function Gl(i,t){const e={},n=r(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const o=r(t,["default"]);o!=null&&s(e,["default"],o);const a=r(t,["description"]);a!=null&&s(e,["description"],a);const l=r(t,["enum"]);l!=null&&s(e,["enum"],l);const u=r(t,["example"]);u!=null&&s(e,["example"],u);const d=r(t,["format"]);d!=null&&s(e,["format"],d);const c=r(t,["items"]);c!=null&&s(e,["items"],c);const f=r(t,["maxItems"]);f!=null&&s(e,["maxItems"],f);const p=r(t,["maxLength"]);p!=null&&s(e,["maxLength"],p);const m=r(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);const h=r(t,["maximum"]);h!=null&&s(e,["maximum"],h);const g=r(t,["minItems"]);g!=null&&s(e,["minItems"],g);const y=r(t,["minLength"]);y!=null&&s(e,["minLength"],y);const _=r(t,["minProperties"]);_!=null&&s(e,["minProperties"],_);const A=r(t,["minimum"]);A!=null&&s(e,["minimum"],A);const M=r(t,["nullable"]);M!=null&&s(e,["nullable"],M);const k=r(t,["pattern"]);k!=null&&s(e,["pattern"],k);const P=r(t,["properties"]);P!=null&&s(e,["properties"],P);const N=r(t,["propertyOrdering"]);N!=null&&s(e,["propertyOrdering"],N);const V=r(t,["required"]);V!=null&&s(e,["required"],V);const U=r(t,["title"]);U!=null&&s(e,["title"],U);const $=r(t,["type"]);return $!=null&&s(e,["type"],$),e}function ql(i,t){const e={},n=r(t,["featureSelectionPreference"]);return n!=null&&s(e,["featureSelectionPreference"],n),e}function $l(i,t){const e={},n=r(t,["method"]);n!=null&&s(e,["method"],n);const o=r(t,["category"]);o!=null&&s(e,["category"],o);const a=r(t,["threshold"]);return a!=null&&s(e,["threshold"],a),e}function Bl(i,t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&s(e,["description"],n);const o=r(t,["name"]);o!=null&&s(e,["name"],o);const a=r(t,["parameters"]);a!=null&&s(e,["parameters"],a);const l=r(t,["response"]);return l!=null&&s(e,["response"],l),e}function Hl(i,t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=r(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Jl(i,t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Hl(i,n)),e}function Ol(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Wl(i,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Ol(i,n)),e}function Yl(){return{}}function Zl(i,t){const e={},n=r(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function Kl(i,t){const e={},n=r(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],Zl(i,n));const o=r(t,["authType"]);o!=null&&s(e,["authType"],o);const a=r(t,["googleServiceAccountConfig"]);a!=null&&s(e,["googleServiceAccountConfig"],a);const l=r(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const u=r(t,["oauthConfig"]);u!=null&&s(e,["oauthConfig"],u);const d=r(t,["oidcConfig"]);return d!=null&&s(e,["oidcConfig"],d),e}function zl(i,t){const e={},n=r(t,["authConfig"]);return n!=null&&s(e,["authConfig"],Kl(i,n)),e}function Xl(){return{}}function vi(i,t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Bl(i,m))),s(e,["functionDeclarations"],p)}const o=r(t,["retrieval"]);o!=null&&s(e,["retrieval"],o);const a=r(t,["googleSearch"]);a!=null&&s(e,["googleSearch"],Jl(i,a));const l=r(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Wl(i,l)),r(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],Yl());const d=r(t,["googleMaps"]);d!=null&&s(e,["googleMaps"],zl(i,d)),r(t,["urlContext"])!=null&&s(e,["urlContext"],Xl());const f=r(t,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function Ql(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function jl(i,t){const e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=r(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function eu(i,t){const e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],jl(i,n));const o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function tu(i,t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Ql(i,n));const o=r(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],eu(i,o)),e}function nu(i,t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function iu(i,t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],nu(i,n)),e}function ou(i,t){const e={},n=r(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],iu(i,n)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function ru(i,t){const e={},n=r(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const o=r(t,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function su(i,t,e){const n={},o=r(t,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],_e(i,H(i,o)));const a=r(t,["temperature"]);a!=null&&s(n,["temperature"],a);const l=r(t,["topP"]);l!=null&&s(n,["topP"],l);const u=r(t,["topK"]);u!=null&&s(n,["topK"],u);const d=r(t,["candidateCount"]);d!=null&&s(n,["candidateCount"],d);const c=r(t,["maxOutputTokens"]);c!=null&&s(n,["maxOutputTokens"],c);const f=r(t,["stopSequences"]);f!=null&&s(n,["stopSequences"],f);const p=r(t,["responseLogprobs"]);p!=null&&s(n,["responseLogprobs"],p);const m=r(t,["logprobs"]);m!=null&&s(n,["logprobs"],m);const h=r(t,["presencePenalty"]);h!=null&&s(n,["presencePenalty"],h);const g=r(t,["frequencyPenalty"]);g!=null&&s(n,["frequencyPenalty"],g);const y=r(t,["seed"]);y!=null&&s(n,["seed"],y);const _=r(t,["responseMimeType"]);_!=null&&s(n,["responseMimeType"],_);const A=r(t,["responseSchema"]);A!=null&&s(n,["responseSchema"],Gl(i,Be(i,A)));const M=r(t,["routingConfig"]);M!=null&&s(n,["routingConfig"],M);const k=r(t,["modelSelectionConfig"]);k!=null&&s(n,["modelConfig"],ql(i,k));const P=r(t,["safetySettings"]);if(e!==void 0&&P!=null){let Q=P;Array.isArray(Q)&&(Q=Q.map(We=>$l(i,We))),s(e,["safetySettings"],Q)}const N=r(t,["tools"]);if(e!==void 0&&N!=null){let Q=ke(i,N);Array.isArray(Q)&&(Q=Q.map(We=>vi(i,Me(i,We)))),s(e,["tools"],Q)}const V=r(t,["toolConfig"]);e!==void 0&&V!=null&&s(e,["toolConfig"],tu(i,V));const U=r(t,["labels"]);e!==void 0&&U!=null&&s(e,["labels"],U);const $=r(t,["cachedContent"]);e!==void 0&&$!=null&&s(e,["cachedContent"],ie(i,$));const w=r(t,["responseModalities"]);w!=null&&s(n,["responseModalities"],w);const F=r(t,["mediaResolution"]);F!=null&&s(n,["mediaResolution"],F);const O=r(t,["speechConfig"]);O!=null&&s(n,["speechConfig"],ou(i,si(i,O)));const Ct=r(t,["audioTimestamp"]);Ct!=null&&s(n,["audioTimestamp"],Ct);const Tt=r(t,["thinkingConfig"]);return Tt!=null&&s(n,["thinkingConfig"],ru(i,Tt)),n}function $n(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["contents"]);if(o!=null){let l=Y(i,o);Array.isArray(l)&&(l=l.map(u=>_e(i,u))),s(e,["contents"],l)}const a=r(t,["config"]);return a!=null&&s(e,["generationConfig"],su(i,a,e)),e}function au(i,t,e){const n={},o=r(t,["taskType"]);e!==void 0&&o!=null&&s(e,["instances[]","task_type"],o);const a=r(t,["title"]);e!==void 0&&a!=null&&s(e,["instances[]","title"],a);const l=r(t,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const u=r(t,["mimeType"]);e!==void 0&&u!=null&&s(e,["instances[]","mimeType"],u);const d=r(t,["autoTruncate"]);return e!==void 0&&d!=null&&s(e,["parameters","autoTruncate"],d),n}function lu(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["contents"]);o!=null&&s(e,["instances[]","content"],ri(i,o));const a=r(t,["config"]);return a!=null&&s(e,["config"],au(i,a,e)),e}function uu(i,t,e){const n={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const a=r(t,["negativePrompt"]);e!==void 0&&a!=null&&s(e,["parameters","negativePrompt"],a);const l=r(t,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const u=r(t,["aspectRatio"]);e!==void 0&&u!=null&&s(e,["parameters","aspectRatio"],u);const d=r(t,["guidanceScale"]);e!==void 0&&d!=null&&s(e,["parameters","guidanceScale"],d);const c=r(t,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const f=r(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&s(e,["parameters","safetySetting"],f);const p=r(t,["personGeneration"]);e!==void 0&&p!=null&&s(e,["parameters","personGeneration"],p);const m=r(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&s(e,["parameters","includeSafetyAttributes"],m);const h=r(t,["includeRaiReason"]);e!==void 0&&h!=null&&s(e,["parameters","includeRaiReason"],h);const g=r(t,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const y=r(t,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const _=r(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&s(e,["parameters","outputOptions","compressionQuality"],_);const A=r(t,["addWatermark"]);e!==void 0&&A!=null&&s(e,["parameters","addWatermark"],A);const M=r(t,["enhancePrompt"]);return e!==void 0&&M!=null&&s(e,["parameters","enhancePrompt"],M),n}function cu(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["prompt"]);o!=null&&s(e,["instances[0]","prompt"],o);const a=r(t,["config"]);return a!=null&&s(e,["config"],uu(i,a,e)),e}function ht(i,t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const o=r(t,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],oe(i,o));const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function du(i,t){const e={},n=r(t,["maskMode"]);n!=null&&s(e,["maskMode"],n);const o=r(t,["segmentationClasses"]);o!=null&&s(e,["maskClasses"],o);const a=r(t,["maskDilation"]);return a!=null&&s(e,["dilation"],a),e}function fu(i,t){const e={},n=r(t,["controlType"]);n!=null&&s(e,["controlType"],n);const o=r(t,["enableControlImageComputation"]);return o!=null&&s(e,["computeControl"],o),e}function pu(i,t){const e={},n=r(t,["styleDescription"]);return n!=null&&s(e,["styleDescription"],n),e}function mu(i,t){const e={},n=r(t,["subjectType"]);n!=null&&s(e,["subjectType"],n);const o=r(t,["subjectDescription"]);return o!=null&&s(e,["subjectDescription"],o),e}function hu(i,t){const e={},n=r(t,["referenceImage"]);n!=null&&s(e,["referenceImage"],ht(i,n));const o=r(t,["referenceId"]);o!=null&&s(e,["referenceId"],o);const a=r(t,["referenceType"]);a!=null&&s(e,["referenceType"],a);const l=r(t,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],du(i,l));const u=r(t,["controlImageConfig"]);u!=null&&s(e,["controlImageConfig"],fu(i,u));const d=r(t,["styleImageConfig"]);d!=null&&s(e,["styleImageConfig"],pu(i,d));const c=r(t,["subjectImageConfig"]);return c!=null&&s(e,["subjectImageConfig"],mu(i,c)),e}function gu(i,t,e){const n={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const a=r(t,["negativePrompt"]);e!==void 0&&a!=null&&s(e,["parameters","negativePrompt"],a);const l=r(t,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const u=r(t,["aspectRatio"]);e!==void 0&&u!=null&&s(e,["parameters","aspectRatio"],u);const d=r(t,["guidanceScale"]);e!==void 0&&d!=null&&s(e,["parameters","guidanceScale"],d);const c=r(t,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const f=r(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&s(e,["parameters","safetySetting"],f);const p=r(t,["personGeneration"]);e!==void 0&&p!=null&&s(e,["parameters","personGeneration"],p);const m=r(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&s(e,["parameters","includeSafetyAttributes"],m);const h=r(t,["includeRaiReason"]);e!==void 0&&h!=null&&s(e,["parameters","includeRaiReason"],h);const g=r(t,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const y=r(t,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const _=r(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&s(e,["parameters","outputOptions","compressionQuality"],_);const A=r(t,["editMode"]);e!==void 0&&A!=null&&s(e,["parameters","editMode"],A);const M=r(t,["baseSteps"]);return e!==void 0&&M!=null&&s(e,["parameters","editConfig","baseSteps"],M),n}function yu(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["prompt"]);o!=null&&s(e,["instances[0]","prompt"],o);const a=r(t,["referenceImages"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>hu(i,d))),s(e,["instances[0]","referenceImages"],u)}const l=r(t,["config"]);return l!=null&&s(e,["config"],gu(i,l,e)),e}function vu(i,t,e){const n={},o=r(t,["includeRaiReason"]);e!==void 0&&o!=null&&s(e,["parameters","includeRaiReason"],o);const a=r(t,["outputMimeType"]);e!==void 0&&a!=null&&s(e,["parameters","outputOptions","mimeType"],a);const l=r(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","compressionQuality"],l);const u=r(t,["numberOfImages"]);e!==void 0&&u!=null&&s(e,["parameters","sampleCount"],u);const d=r(t,["mode"]);return e!==void 0&&d!=null&&s(e,["parameters","mode"],d),n}function Cu(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["image"]);o!=null&&s(e,["instances[0]","image"],ht(i,o));const a=r(t,["upscaleFactor"]);a!=null&&s(e,["parameters","upscaleConfig","upscaleFactor"],a);const l=r(t,["config"]);return l!=null&&s(e,["config"],vu(i,l,e)),e}function Tu(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","name"],b(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function _u(i,t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);e!==void 0&&a!=null&&s(e,["_query","pageToken"],a);const l=r(t,["filter"]);e!==void 0&&l!=null&&s(e,["_query","filter"],l);const u=r(t,["queryBase"]);return e!==void 0&&u!=null&&s(e,["_url","models_url"],ui(i,u)),n}function Eu(i,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],_u(i,n,e)),e}function Su(i,t,e){const n={},o=r(t,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const a=r(t,["description"]);e!==void 0&&a!=null&&s(e,["description"],a);const l=r(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),n}function Au(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],Su(i,o,e)),e}function Iu(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","name"],b(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function xu(i,t,e){const n={},o=r(t,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],_e(i,H(i,o)));const a=r(t,["tools"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>vi(i,d))),s(e,["tools"],u)}const l=r(t,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),n}function Mu(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["contents"]);if(o!=null){let l=Y(i,o);Array.isArray(l)&&(l=l.map(u=>_e(i,u))),s(e,["contents"],l)}const a=r(t,["config"]);return a!=null&&s(e,["config"],xu(i,a,e)),e}function ku(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["contents"]);if(o!=null){let l=Y(i,o);Array.isArray(l)&&(l=l.map(u=>_e(i,u))),s(e,["contents"],l)}const a=r(t,["config"]);return a!=null&&s(e,["config"],a),e}function Ru(i,t,e){const n={},o=r(t,["numberOfVideos"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const a=r(t,["outputGcsUri"]);e!==void 0&&a!=null&&s(e,["parameters","storageUri"],a);const l=r(t,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const u=r(t,["durationSeconds"]);e!==void 0&&u!=null&&s(e,["parameters","durationSeconds"],u);const d=r(t,["seed"]);e!==void 0&&d!=null&&s(e,["parameters","seed"],d);const c=r(t,["aspectRatio"]);e!==void 0&&c!=null&&s(e,["parameters","aspectRatio"],c);const f=r(t,["resolution"]);e!==void 0&&f!=null&&s(e,["parameters","resolution"],f);const p=r(t,["personGeneration"]);e!==void 0&&p!=null&&s(e,["parameters","personGeneration"],p);const m=r(t,["pubsubTopic"]);e!==void 0&&m!=null&&s(e,["parameters","pubsubTopic"],m);const h=r(t,["negativePrompt"]);e!==void 0&&h!=null&&s(e,["parameters","negativePrompt"],h);const g=r(t,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const y=r(t,["generateAudio"]);return e!==void 0&&y!=null&&s(e,["parameters","generateAudio"],y),n}function wu(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],b(i,n));const o=r(t,["prompt"]);o!=null&&s(e,["instances[0]","prompt"],o);const a=r(t,["image"]);a!=null&&s(e,["instances[0]","image"],ht(i,a));const l=r(t,["config"]);return l!=null&&s(e,["config"],Ru(i,l,e)),e}function Pu(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function Nu(i,t){const e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Du(i,t){const e={},n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Vu(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Pu(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],Nu(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],Du(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function Lu(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Vu(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function Fu(i,t){const e={},n=r(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function Uu(i,t){const e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const o=r(t,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function bu(i,t){const e={},n=r(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Uu(i,a))),s(e,["urlMetadata"],o)}return e}function Gu(i,t){const e={},n=r(t,["content"]);n!=null&&s(e,["content"],Lu(i,n));const o=r(t,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Fu(i,o));const a=r(t,["tokenCount"]);a!=null&&s(e,["tokenCount"],a);const l=r(t,["finishReason"]);l!=null&&s(e,["finishReason"],l);const u=r(t,["urlContextMetadata"]);u!=null&&s(e,["urlContextMetadata"],bu(i,u));const d=r(t,["avgLogprobs"]);d!=null&&s(e,["avgLogprobs"],d);const c=r(t,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const f=r(t,["index"]);f!=null&&s(e,["index"],f);const p=r(t,["logprobsResult"]);p!=null&&s(e,["logprobsResult"],p);const m=r(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function Bn(i,t){const e={},n=r(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>Gu(i,d))),s(e,["candidates"],u)}const o=r(t,["modelVersion"]);o!=null&&s(e,["modelVersion"],o);const a=r(t,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const l=r(t,["usageMetadata"]);return l!=null&&s(e,["usageMetadata"],l),e}function qu(i,t){const e={},n=r(t,["values"]);return n!=null&&s(e,["values"],n),e}function $u(){return{}}function Bu(i,t){const e={},n=r(t,["embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>qu(i,l))),s(e,["embeddings"],a)}return r(t,["metadata"])!=null&&s(e,["metadata"],$u()),e}function Hu(i,t){const e={},n=r(t,["bytesBase64Encoded"]);n!=null&&s(e,["imageBytes"],oe(i,n));const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ci(i,t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const o=r(t,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const a=r(t,["contentType"]);return a!=null&&s(e,["contentType"],a),e}function Ju(i,t){const e={},n=r(t,["_self"]);n!=null&&s(e,["image"],Hu(i,n));const o=r(t,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const a=r(t,["_self"]);return a!=null&&s(e,["safetyAttributes"],Ci(i,a)),e}function Ou(i,t){const e={},n=r(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Ju(i,l))),s(e,["generatedImages"],a)}const o=r(t,["positivePromptSafetyAttributes"]);return o!=null&&s(e,["positivePromptSafetyAttributes"],Ci(i,o)),e}function Wu(i,t){const e={},n=r(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const o=r(t,["createTime"]);o!=null&&s(e,["createTime"],o);const a=r(t,["updateTime"]);return a!=null&&s(e,["updateTime"],a),e}function lt(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["displayName"]);o!=null&&s(e,["displayName"],o);const a=r(t,["description"]);a!=null&&s(e,["description"],a);const l=r(t,["version"]);l!=null&&s(e,["version"],l);const u=r(t,["_self"]);u!=null&&s(e,["tunedModelInfo"],Wu(i,u));const d=r(t,["inputTokenLimit"]);d!=null&&s(e,["inputTokenLimit"],d);const c=r(t,["outputTokenLimit"]);c!=null&&s(e,["outputTokenLimit"],c);const f=r(t,["supportedGenerationMethods"]);return f!=null&&s(e,["supportedActions"],f),e}function Yu(i,t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=r(t,["_self"]);if(o!=null){let a=ci(i,o);Array.isArray(a)&&(a=a.map(l=>lt(i,l))),s(e,["models"],a)}return e}function Zu(){return{}}function Ku(i,t){const e={},n=r(t,["totalTokens"]);n!=null&&s(e,["totalTokens"],n);const o=r(t,["cachedContentTokenCount"]);return o!=null&&s(e,["cachedContentTokenCount"],o),e}function zu(i,t){const e={},n=r(t,["video","uri"]);n!=null&&s(e,["uri"],n);const o=r(t,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],oe(i,o));const a=r(t,["encoding"]);return a!=null&&s(e,["mimeType"],a),e}function Xu(i,t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],zu(i,n)),e}function Qu(i,t){const e={},n=r(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Xu(i,u))),s(e,["generatedVideos"],l)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const a=r(t,["raiMediaFilteredReasons"]);return a!=null&&s(e,["raiMediaFilteredReasons"],a),e}function ju(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["metadata"]);o!=null&&s(e,["metadata"],o);const a=r(t,["done"]);a!=null&&s(e,["done"],a);const l=r(t,["error"]);l!=null&&s(e,["error"],l);const u=r(t,["response","generateVideoResponse"]);return u!=null&&s(e,["response"],Qu(i,u)),e}function ec(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function tc(i,t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=r(t,["data"]);o!=null&&s(e,["data"],o);const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function nc(i,t){const e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=r(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function ic(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ec(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],tc(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],nc(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function oc(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>ic(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function rc(i,t){const e={},n=r(t,["citations"]);return n!=null&&s(e,["citations"],n),e}function sc(i,t){const e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const o=r(t,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function ac(i,t){const e={},n=r(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>sc(i,a))),s(e,["urlMetadata"],o)}return e}function lc(i,t){const e={},n=r(t,["content"]);n!=null&&s(e,["content"],oc(i,n));const o=r(t,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],rc(i,o));const a=r(t,["finishMessage"]);a!=null&&s(e,["finishMessage"],a);const l=r(t,["finishReason"]);l!=null&&s(e,["finishReason"],l);const u=r(t,["urlContextMetadata"]);u!=null&&s(e,["urlContextMetadata"],ac(i,u));const d=r(t,["avgLogprobs"]);d!=null&&s(e,["avgLogprobs"],d);const c=r(t,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const f=r(t,["index"]);f!=null&&s(e,["index"],f);const p=r(t,["logprobsResult"]);p!=null&&s(e,["logprobsResult"],p);const m=r(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function Hn(i,t){const e={},n=r(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>lc(i,f))),s(e,["candidates"],c)}const o=r(t,["createTime"]);o!=null&&s(e,["createTime"],o);const a=r(t,["responseId"]);a!=null&&s(e,["responseId"],a);const l=r(t,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const u=r(t,["promptFeedback"]);u!=null&&s(e,["promptFeedback"],u);const d=r(t,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function uc(i,t){const e={},n=r(t,["truncated"]);n!=null&&s(e,["truncated"],n);const o=r(t,["token_count"]);return o!=null&&s(e,["tokenCount"],o),e}function cc(i,t){const e={},n=r(t,["values"]);n!=null&&s(e,["values"],n);const o=r(t,["statistics"]);return o!=null&&s(e,["statistics"],uc(i,o)),e}function dc(i,t){const e={},n=r(t,["billableCharacterCount"]);return n!=null&&s(e,["billableCharacterCount"],n),e}function fc(i,t){const e={},n=r(t,["predictions[]","embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>cc(i,l))),s(e,["embeddings"],a)}const o=r(t,["metadata"]);return o!=null&&s(e,["metadata"],dc(i,o)),e}function pc(i,t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const o=r(t,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],oe(i,o));const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function Ti(i,t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const o=r(t,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const a=r(t,["contentType"]);return a!=null&&s(e,["contentType"],a),e}function gt(i,t){const e={},n=r(t,["_self"]);n!=null&&s(e,["image"],pc(i,n));const o=r(t,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const a=r(t,["_self"]);a!=null&&s(e,["safetyAttributes"],Ti(i,a));const l=r(t,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function mc(i,t){const e={},n=r(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>gt(i,l))),s(e,["generatedImages"],a)}const o=r(t,["positivePromptSafetyAttributes"]);return o!=null&&s(e,["positivePromptSafetyAttributes"],Ti(i,o)),e}function hc(i,t){const e={},n=r(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>gt(i,a))),s(e,["generatedImages"],o)}return e}function gc(i,t){const e={},n=r(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>gt(i,a))),s(e,["generatedImages"],o)}return e}function yc(i,t){const e={},n=r(t,["endpoint"]);n!=null&&s(e,["name"],n);const o=r(t,["deployedModelId"]);return o!=null&&s(e,["deployedModelId"],o),e}function vc(i,t){const e={},n=r(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&s(e,["baseModel"],n);const o=r(t,["createTime"]);o!=null&&s(e,["createTime"],o);const a=r(t,["updateTime"]);return a!=null&&s(e,["updateTime"],a),e}function Cc(i,t){const e={},n=r(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);const o=r(t,["epoch"]);o!=null&&s(e,["epoch"],o);const a=r(t,["step"]);return a!=null&&s(e,["step"],a),e}function ut(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["displayName"]);o!=null&&s(e,["displayName"],o);const a=r(t,["description"]);a!=null&&s(e,["description"],a);const l=r(t,["versionId"]);l!=null&&s(e,["version"],l);const u=r(t,["deployedModels"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(h=>yc(i,h))),s(e,["endpoints"],m)}const d=r(t,["labels"]);d!=null&&s(e,["labels"],d);const c=r(t,["_self"]);c!=null&&s(e,["tunedModelInfo"],vc(i,c));const f=r(t,["defaultCheckpointId"]);f!=null&&s(e,["defaultCheckpointId"],f);const p=r(t,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>Cc(i,h))),s(e,["checkpoints"],m)}return e}function Tc(i,t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=r(t,["_self"]);if(o!=null){let a=ci(i,o);Array.isArray(a)&&(a=a.map(l=>ut(i,l))),s(e,["models"],a)}return e}function _c(){return{}}function Ec(i,t){const e={},n=r(t,["totalTokens"]);return n!=null&&s(e,["totalTokens"],n),e}function Sc(i,t){const e={},n=r(t,["tokensInfo"]);return n!=null&&s(e,["tokensInfo"],n),e}function Ac(i,t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const o=r(t,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],oe(i,o));const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function Ic(i,t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],Ac(i,n)),e}function xc(i,t){const e={},n=r(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Ic(i,u))),s(e,["generatedVideos"],l)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const a=r(t,["raiMediaFilteredReasons"]);return a!=null&&s(e,["raiMediaFilteredReasons"],a),e}function Mc(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["metadata"]);o!=null&&s(e,["metadata"],o);const a=r(t,["done"]);a!=null&&s(e,["done"],a);const l=r(t,["error"]);l!=null&&s(e,["error"],l);const u=r(t,["response"]);return u!=null&&s(e,["response"],xc(i,u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kc="Content-Type",Rc="X-Server-Timeout",wc="User-Agent",ct="x-goog-api-client",Pc="1.4.0",Nc=`google-genai-sdk/${Pc}`,Dc="v1beta1",Vc="v1beta",Jn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class _i extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ClientError"}}class dt extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ServerError"}}class Lc{constructor(t){var e,n;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:Dc,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Vc,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,n){const o=[this.getRequestUrlInternal(e)];return n&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,e,n);if(t.queryParams)for(const[l,u]of Object.entries(t.queryParams))o.searchParams.append(l,String(u));let a={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=t.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,e,t.abortSignal),this.unaryApiCall(o,a,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[o,a]of Object.entries(e))typeof a=="object"?n[o]=Object.assign(Object.assign({},n[o]),a):a!==void 0&&(n[o]=a);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,e,n);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=t.body,a=await this.includeExtraHttpOptionsToRequestInit(a,e,t.abortSignal),this.streamApiCall(o,a,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,n){if(e&&e.timeout||n){const o=new AbortController,a=o.signal;e.timeout&&(e==null?void 0:e.timeout)>0&&setTimeout(()=>o.abort(),e.timeout),n&&n.addEventListener("abort",()=>{o.abort()}),t.signal=a}return t.headers=await this.getHeadersInternal(e),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async o=>(await On(o),new ot(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async o=>(await On(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var e;return pe(this,arguments,function*(){const o=(e=t==null?void 0:t.body)===null||e===void 0?void 0:e.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:d}=yield G(o.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=a.decode(d);try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),h=m.status,g=m.code,y=`got status: ${h}. ${JSON.stringify(p)}`;if(g>=400&&g<500)throw new _i(y);if(g>=500&&g<600)throw new dt(y)}}catch(p){const m=p;if(m.name==="ClientError"||m.name==="ServerError")throw p}l+=c;let f=l.match(Jn);for(;f;){const p=f[1];try{const m=new Response(p,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield G(new ot(m)),l=l.slice(f[0].length),f=l.match(Jn)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{o.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const t={},e=Nc+" "+this.clientOptions.userAgentExtra;return t[wc]=e,t[ct]=e,t[kc]="application/json",t}async getHeadersInternal(t){const e=new Headers;if(t&&t.headers){for(const[n,o]of Object.entries(t.headers))e.append(n,o);t.timeout&&t.timeout>0&&e.append(Rc,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(t,e){var n;const o={};e!=null&&(o.mimeType=e.mimeType,o.name=e.name,o.displayName=e.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,l=await a.stat(t);o.sizeBytes=String(l.size);const u=(n=e==null?void 0:e.mimeType)!==null&&n!==void 0?n:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const d=await this.fetchUploadUrl(o,e);return a.upload(t,d,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e){var n;let o={};e!=null&&e.httpOptions?o=e.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const a={file:t},l=await this.request({path:S("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:o});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(n=l==null?void 0:l.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function On(i){var t;if(i===void 0)throw new dt("response is undefined");if(!i.ok){const e=i.status,n=i.statusText;let o;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=`got status: ${e} ${n}. ${JSON.stringify(o)}`;throw e>=400&&e<500?new _i(a):e>=500&&e<600?new dt(a):new Error(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fc="mcp_used/unknown";function Ei(i){for(const t of i)if(yt(t)||typeof t=="object"&&"inputSchema"in t)return!0;return!1}function Si(i){var t;const e=(t=i[ct])!==null&&t!==void 0?t:"";i[ct]=(e+` ${Fc}`).trimStart()}function Uc(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(o=>yt(o)))!==null&&n!==void 0?n:!1}function bc(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(o=>!yt(o)))!==null&&n!==void 0?n:!1}function yt(i){return i!==null&&typeof i=="object"&&i instanceof vt}function Gc(i,t=100){return pe(this,arguments,function*(){let n,o=0;for(;o<t;){const a=yield G(i.listTools({cursor:n}));for(const l of a.tools)yield yield G(l),o++;if(!a.nextCursor)break;n=a.nextCursor}})}class vt{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new vt(t,e)}async initialize(){var t,e,n,o;if(this.mcpTools.length>0)return;const a={},l=[];for(const f of this.mcpClients)try{for(var u=!0,d=(e=void 0,Ie(Gc(f))),c;c=await d.next(),t=c.done,!t;u=!0){o=c.value,u=!1;const p=o;l.push(p);const m=p.name;if(a[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);a[m]=f}}catch(p){e={error:p}}finally{try{!u&&!t&&(n=d.return)&&await n.call(d)}finally{if(e)throw e.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),$o(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const n of t)if(n.name in this.functionNameToMcpClient){const a=await this.functionNameToMcpClient[n.name].callTool({name:n.name,arguments:n.args});e.push({functionResponse:{name:n.name,response:a.isError?{error:a}:a}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function qc(i,t,e){const n=new ko;let o;e.data instanceof Blob?o=JSON.parse(await e.data.text()):o=JSON.parse(e.data);const a=za(i,o);Object.assign(n,a),t(n)}class $c{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=Jc(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(k=>{c=k}),p=t.callbacks,m=function(){c({})},h=this.apiClient,g={onopen:m,onmessage:k=>{qc(h,p.onmessage,k)},onerror:(e=p==null?void 0:p.onerror)!==null&&e!==void 0?e:function(k){},onclose:(n=p==null?void 0:p.onclose)!==null&&n!==void 0?n:function(k){}},y=this.webSocketFactory.create(d,Hc(l),g);y.connect(),await f;const _=b(this.apiClient,t.model),A=hi(this.apiClient,{model:_}),M=at(this.apiClient,{setup:A});return y.send(JSON.stringify(M)),new Bc(y,this.apiClient)}}class Bc{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=ca(this.apiClient,t),n=gi(this.apiClient,e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=da(this.apiClient,t),n=at(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const e=at(this.apiClient,{playbackControl:t});this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(de.PLAY)}pause(){this.sendPlaybackControl(de.PAUSE)}stop(){this.sendPlaybackControl(de.STOP)}resetContext(){this.sendPlaybackControl(de.RESET_CONTEXT)}close(){this.conn.close()}}function Hc(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function Jc(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oc="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Wc(i,t,e){const n=new Mo;let o;if(e.data instanceof Blob?o=JSON.parse(await e.data.text()):o=JSON.parse(e.data),i.isVertexAI()){const a=$a(i,o);Object.assign(n,a)}else{const a=qa(i,o);Object.assign(n,a)}t(n)}class Yc{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n,this.music=new $c(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,n,o,a,l,u;const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getDefaultHeaders();t.config&&t.config.tools&&Ei(t.config.tools)&&Si(p);const m=Xc(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const w=this.apiClient.getApiKey();let F="BidiGenerateContent",O="key";w!=null&&w.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),F="BidiGenerateContentConstrained",O="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${O}=${w}`}let h=()=>{};const g=new Promise(w=>{h=w}),y=t.callbacks,_=function(){var w;(w=y==null?void 0:y.onopen)===null||w===void 0||w.call(y),h({})},A=this.apiClient,M={onopen:_,onmessage:w=>{Wc(A,y.onmessage,w)},onerror:(e=y==null?void 0:y.onerror)!==null&&e!==void 0?e:function(w){},onclose:(n=y==null?void 0:y.onclose)!==null&&n!==void 0?n:function(w){}},k=this.webSocketFactory.create(f,zc(m),M);k.connect(),await g;let P=b(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const w=this.apiClient.getProject(),F=this.apiClient.getLocation();P=`projects/${w}/locations/${F}/`+P}let N={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[qe.AUDIO]}:t.config.responseModalities=[qe.AUDIO]),!((a=t.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const V=(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],U=[];for(const w of V)if(this.isCallableTool(w)){const F=w;U.push(await F.tool())}else U.push(w);U.length>0&&(t.config.tools=U);const $={model:P,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?N=ia(this.apiClient,$):N=na(this.apiClient,$),delete N.config,k.send(JSON.stringify(N)),new Kc(k,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const Zc={turnComplete:!0};class Kc{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let n=[];try{n=Y(t,e.turns),t.isVertexAI()?n=n.map(o=>_e(t,o)):n=n.map(o=>Oe(t,o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:n,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let n=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?n=e.functionResponses:n=[e.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!t.isVertexAI()&&!("id"in a))throw new Error(Oc)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},Zc),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:ua(this.apiClient,t)}:e={realtimeInput:la(this.apiClient,t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function zc(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function Xc(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wn=10;function Yn(i){var t,e,n;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const l of(e=i==null?void 0:i.tools)!==null&&e!==void 0?e:[])if(De(l)){o=!0;break}if(!o)return!0;const a=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function De(i){return"callTool"in i&&typeof i.callTool=="function"}function Zn(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qc extends Te{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var n,o,a,l,u;const d=await this.processParamsForMcpUsage(e);if(!Uc(e)||Yn(e.config))return await this.generateContentInternal(d);if(bc(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const p=Y(this.apiClient,d.contents),m=(a=(o=(n=d.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:Wn;let h=0;for(;h<m&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const g=c.candidates[0].content,y=[];for(const _ of(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(De(_)){const M=await _.callTool(c.functionCalls);y.push(...M)}h++,f={role:"user",parts:y},d.contents=Y(this.apiClient,d.contents),d.contents.push(g),d.contents.push(f),Zn(d.config)&&(p.push(g),p.push(f))}return Zn(d.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async e=>{if(Yn(e.config)){const n=await this.processParamsForMcpUsage(e);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(n=>{var o;let a;const l=[];if(n!=null&&n.generatedImages)for(const d of n.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((o=d==null?void 0:d.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:l.push(d);let u;return a?u={generatedImages:l,positivePromptSafetyAttributes:a}:u={generatedImages:l},u}),this.list=async e=>{var n;const l={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((n=l.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Je(Ce.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async e=>{const n={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(n.referenceImages=e.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async e=>{let n={numberOfImages:1,mode:"upscale"};e.config&&(n=Object.assign(Object.assign({},n),e.config));const o={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:n};return await this.upscaleImageInternal(o)}}async processParamsForMcpUsage(t){var e,n,o;const a=(e=t.config)===null||e===void 0?void 0:e.tools;if(!a)return t;const l=await Promise.all(a.map(async d=>De(d)?await d.tool():d)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(u.config.tools=l,t.config&&t.config.tools&&Ei(t.config.tools)){const d=(o=(n=t.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Si(c),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(t){var e,n,o;const a=new Map;for(const l of(n=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&n!==void 0?n:[])if(De(l)){const u=l,d=await u.tool();for(const c of(o=d.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(a.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);a.set(c.name,u)}}return a}async processAfcStream(t){var e,n,o;const a=(o=(n=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&o!==void 0?o:Wn;let l=!1,u=0;const d=await this.initAfcToolsMap(t);return function(c,f,p){var m,h;return pe(this,arguments,function*(){for(var g,y,_,A;u<a;){l&&(u++,l=!1);const N=yield G(c.processParamsForMcpUsage(p)),V=yield G(c.generateContentStreamInternal(N)),U=[],$=[];try{for(var M=!0,k=(y=void 0,Ie(V)),P;P=yield G(k.next()),g=P.done,!g;M=!0){A=P.value,M=!1;const w=A;if(yield yield G(w),w.candidates&&(!((m=w.candidates[0])===null||m===void 0)&&m.content)){$.push(w.candidates[0].content);for(const F of(h=w.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<a&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(F.functionCall.name)){const O=yield G(f.get(F.functionCall.name).callTool([F.functionCall]));U.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(w){y={error:w}}finally{try{!M&&!g&&(_=k.return)&&(yield G(_.call(k)))}finally{if(y)throw y.error}}if(U.length>0){l=!0;const w=new Ee;w.candidates=[{content:{role:"user",parts:U}}],yield yield G(w);const F=[];F.push(...$),F.push({role:"user",parts:U});const O=Y(c.apiClient,p.contents).concat(F);p.contents=O}else break}})}(this,d,t)}async generateContentInternal(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=$n(this.apiClient,t);return u=S("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Hn(this.apiClient,f),m=new Ee;return Object.assign(m,p),m})}else{const c=qn(this.apiClient,t);return u=S("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Bn(this.apiClient,f),m=new Ee;return Object.assign(m,p),m})}}async generateContentStreamInternal(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=$n(this.apiClient,t);u=S("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query;const f=this.apiClient;return l=f.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}),l.then(function(p){return pe(this,arguments,function*(){var m,h,g,y;try{for(var _=!0,A=Ie(p),M;M=yield G(A.next()),m=M.done,!m;_=!0){y=M.value,_=!1;const P=Hn(f,yield G(y.json())),N=new Ee;Object.assign(N,P),yield yield G(N)}}catch(k){h={error:k}}finally{try{!_&&!m&&(g=A.return)&&(yield G(g.call(A)))}finally{if(h)throw h.error}}})})}else{const c=qn(this.apiClient,t);u=S("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query;const f=this.apiClient;return l=f.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(p){return pe(this,arguments,function*(){var m,h,g,y;try{for(var _=!0,A=Ie(p),M;M=yield G(A.next()),m=M.done,!m;_=!0){y=M.value,_=!1;const P=Bn(f,yield G(y.json())),N=new Ee;Object.assign(N,P),yield yield G(N)}}catch(k){h={error:k}}finally{try{!_&&!m&&(g=A.return)&&(yield G(g.call(A)))}finally{if(h)throw h.error}}})})}}async embedContent(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=lu(this.apiClient,t);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=fc(this.apiClient,f),m=new Tn;return Object.assign(m,p),m})}else{const c=_l(this.apiClient,t);return u=S("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Bu(this.apiClient,f),m=new Tn;return Object.assign(m,p),m})}}async generateImagesInternal(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=cu(this.apiClient,t);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=mc(this.apiClient,f),m=new _n;return Object.assign(m,p),m})}else{const c=Sl(this.apiClient,t);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Ou(this.apiClient,f),m=new _n;return Object.assign(m,p),m})}}async editImageInternal(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=yu(this.apiClient,t);return a=S("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=hc(this.apiClient,d),f=new _o;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Cu(this.apiClient,t);return a=S("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=gc(this.apiClient,d),f=new Eo;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Tu(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>ut(this.apiClient,f))}else{const c=Al(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>lt(this.apiClient,f))}}async listInternal(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Eu(this.apiClient,t);return u=S("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Tc(this.apiClient,f),m=new En;return Object.assign(m,p),m})}else{const c=xl(this.apiClient,t);return u=S("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Yu(this.apiClient,f),m=new En;return Object.assign(m,p),m})}}async update(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Au(this.apiClient,t);return u=S("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>ut(this.apiClient,f))}else{const c=kl(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>lt(this.apiClient,f))}}async delete(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Iu(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(()=>{const f=_c(),p=new Sn;return Object.assign(p,f),p})}else{const c=Rl(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Zu(),p=new Sn;return Object.assign(p,f),p})}}async countTokens(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Mu(this.apiClient,t);return u=S("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Ec(this.apiClient,f),m=new An;return Object.assign(m,p),m})}else{const c=Pl(this.apiClient,t);return u=S("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Ku(this.apiClient,f),m=new An;return Object.assign(m,p),m})}}async computeTokens(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=ku(this.apiClient,t);return a=S("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=Sc(this.apiClient,d),f=new So;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=wu(this.apiClient,t);return u=S("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>Mc(this.apiClient,f))}else{const c=Vl(this.apiClient,t);return u=S("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>ju(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jc(i,t){const e={},n=r(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function ed(i,t){const e={},n=r(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function td(i,t){const e={},n=r(t,["operationName"]);n!=null&&s(e,["operationName"],n);const o=r(t,["resourceName"]);o!=null&&s(e,["_url","resourceName"],o);const a=r(t,["config"]);return a!=null&&s(e,["config"],a),e}function nd(i,t){const e={},n=r(t,["video","uri"]);n!=null&&s(e,["uri"],n);const o=r(t,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],oe(i,o));const a=r(t,["encoding"]);return a!=null&&s(e,["mimeType"],a),e}function id(i,t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],nd(i,n)),e}function od(i,t){const e={},n=r(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>id(i,u))),s(e,["generatedVideos"],l)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const a=r(t,["raiMediaFilteredReasons"]);return a!=null&&s(e,["raiMediaFilteredReasons"],a),e}function rd(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["metadata"]);o!=null&&s(e,["metadata"],o);const a=r(t,["done"]);a!=null&&s(e,["done"],a);const l=r(t,["error"]);l!=null&&s(e,["error"],l);const u=r(t,["response","generateVideoResponse"]);return u!=null&&s(e,["response"],od(i,u)),e}function sd(i,t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const o=r(t,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],oe(i,o));const a=r(t,["mimeType"]);return a!=null&&s(e,["mimeType"],a),e}function ad(i,t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],sd(i,n)),e}function ld(i,t){const e={},n=r(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>ad(i,u))),s(e,["generatedVideos"],l)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const a=r(t,["raiMediaFilteredReasons"]);return a!=null&&s(e,["raiMediaFilteredReasons"],a),e}function Kn(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["metadata"]);o!=null&&s(e,["metadata"],o);const a=r(t,["done"]);a!=null&&s(e,["done"],a);const l=r(t,["error"]);l!=null&&s(e,["error"],l);const u=r(t,["response"]);return u!=null&&s(e,["response"],ld(i,u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ud extends Te{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=e.name.split("/operations/")[0];let a;return n&&"httpOptions"in n&&(a=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:o,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:e.name,config:n})}async getVideosOperationInternal(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ed(this.apiClient,t);return u=S("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>Kn(this.apiClient,f))}else{const c=jc(this.apiClient,t);return u=S("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>rd(this.apiClient,f))}}async fetchPredictVideosOperationInternal(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=td(this.apiClient,t);return a=S("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>Kn(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cd(i,t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Ai(i,t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],cd(i,n)),e}function dd(i,t){const e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);const o=r(t,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],Ai(i,o)),e}function fd(i,t){const e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>dd(i,a))),s(e,["speakerVoiceConfigs"],o)}return e}function pd(i,t){const e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],Ai(i,n));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],fd(i,o));const a=r(t,["languageCode"]);return a!=null&&s(e,["languageCode"],a),e}function md(i,t){const e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);const o=r(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&s(e,["startOffset"],a),e}function hd(i,t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["data"]);n!=null&&s(e,["data"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function gd(i,t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function yd(i,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],md(i,n));const o=r(t,["thought"]);o!=null&&s(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&s(e,["inlineData"],hd(i,a));const l=r(t,["fileData"]);l!=null&&s(e,["fileData"],gd(i,l));const u=r(t,["thoughtSignature"]);u!=null&&s(e,["thoughtSignature"],u);const d=r(t,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=r(t,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=r(t,["functionCall"]);f!=null&&s(e,["functionCall"],f);const p=r(t,["functionResponse"]);p!=null&&s(e,["functionResponse"],p);const m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function vd(i,t){const e={},n=r(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>yd(i,l))),s(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&s(e,["role"],o),e}function Cd(i,t){const e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=r(t,["description"]);o!=null&&s(e,["description"],o);const a=r(t,["name"]);a!=null&&s(e,["name"],a);const l=r(t,["parameters"]);l!=null&&s(e,["parameters"],l);const u=r(t,["response"]);return u!=null&&s(e,["response"],u),e}function Td(i,t){const e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=r(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function _d(i,t){const e={},n=r(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Td(i,n)),e}function Ed(i,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const o=r(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Sd(i,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Ed(i,n)),e}function Ad(){return{}}function Id(i,t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Cd(i,c))),s(e,["functionDeclarations"],d)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],_d(i,o));const a=r(t,["googleSearchRetrieval"]);if(a!=null&&s(e,["googleSearchRetrieval"],Sd(i,a)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],Ad());const u=r(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function xd(i,t){const e={},n=r(t,["handle"]);if(n!=null&&s(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function zn(){return{}}function Md(i,t){const e={},n=r(t,["disabled"]);n!=null&&s(e,["disabled"],n);const o=r(t,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const a=r(t,["endOfSpeechSensitivity"]);a!=null&&s(e,["endOfSpeechSensitivity"],a);const l=r(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const u=r(t,["silenceDurationMs"]);return u!=null&&s(e,["silenceDurationMs"],u),e}function kd(i,t){const e={},n=r(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],Md(i,n));const o=r(t,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const a=r(t,["turnCoverage"]);return a!=null&&s(e,["turnCoverage"],a),e}function Rd(i,t){const e={},n=r(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function wd(i,t){const e={},n=r(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const o=r(t,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Rd(i,o)),e}function Pd(i,t){const e={},n=r(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function Nd(i,t,e){const n={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const a=r(t,["responseModalities"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","responseModalities"],a);const l=r(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const u=r(t,["topP"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topP"],u);const d=r(t,["topK"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","topK"],d);const c=r(t,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const f=r(t,["mediaResolution"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","mediaResolution"],f);const p=r(t,["seed"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","seed"],p);const m=r(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],pd(i,mt(i,m)));const h=r(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(t,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],vd(i,H(i,g)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let V=ke(i,y);Array.isArray(V)&&(V=V.map(U=>Id(i,Me(i,U)))),s(e,["setup","tools"],V)}const _=r(t,["sessionResumption"]);e!==void 0&&_!=null&&s(e,["setup","sessionResumption"],xd(i,_));const A=r(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&s(e,["setup","inputAudioTranscription"],zn());const M=r(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&s(e,["setup","outputAudioTranscription"],zn());const k=r(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],kd(i,k));const P=r(t,["contextWindowCompression"]);e!==void 0&&P!=null&&s(e,["setup","contextWindowCompression"],wd(i,P));const N=r(t,["proactivity"]);return e!==void 0&&N!=null&&s(e,["setup","proactivity"],Pd(i,N)),n}function Dd(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["setup","model"],b(i,n));const o=r(t,["config"]);return o!=null&&s(e,["config"],Nd(i,o,e)),e}function Vd(i,t,e){const n={},o=r(t,["expireTime"]);e!==void 0&&o!=null&&s(e,["expireTime"],o);const a=r(t,["newSessionExpireTime"]);e!==void 0&&a!=null&&s(e,["newSessionExpireTime"],a);const l=r(t,["uses"]);e!==void 0&&l!=null&&s(e,["uses"],l);const u=r(t,["liveConnectConstraints"]);e!==void 0&&u!=null&&s(e,["bidiGenerateContentSetup"],Dd(i,u));const d=r(t,["lockAdditionalFields"]);return e!==void 0&&d!=null&&s(e,["fieldMask"],d),n}function Ld(i,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Vd(i,n,e)),e}function Fd(i,t){const e={},n=r(t,["name"]);return n!=null&&s(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ud(i){const t=[];for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const n=i[e];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const o=Object.keys(n).map(a=>`${e}.${a}`);t.push(...o)}else t.push(e)}return t.join(",")}function bd(i,t){let e=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const a=n.setup;typeof a=="object"&&a!==null?(i.bidiGenerateContentSetup=a,e=a):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const o=i.fieldMask;if(e){const a=Ud(e);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)a?i.fieldMask=a:delete i.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(c=>l.includes(c)?`generationConfig.${c}`:c));const d=[];a&&d.push(a),u.length>0&&d.push(...u),d.length>0?i.fieldMask=d.join(","):delete i.fieldMask}else delete i.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?i.fieldMask=o.join(","):delete i.fieldMask;return i}class Gd extends Te{constructor(t){super(),this.apiClient=t}async create(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Ld(this.apiClient,t);a=S("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const d=bd(u,t.config);return o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),o.then(c=>Fd(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qd(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],n);const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function $d(i,t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);e!==void 0&&a!=null&&s(e,["_query","pageToken"],a);const l=r(t,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),n}function Bd(i,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],$d(i,n,e)),e}function Hd(i,t){const e={},n=r(t,["textInput"]);n!=null&&s(e,["textInput"],n);const o=r(t,["output"]);return o!=null&&s(e,["output"],o),e}function Jd(i,t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(t,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Hd(i,a))),s(e,["examples","examples"],o)}return e}function Od(i,t,e){const n={};if(r(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=r(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&s(e,["displayName"],o),r(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=r(t,["epochCount"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","epochCount"],a);const l=r(t,["learningRateMultiplier"]);if(l!=null&&s(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),r(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=r(t,["batchSize"]);e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","batchSize"],u);const d=r(t,["learningRate"]);return e!==void 0&&d!=null&&s(e,["tuningTask","hyperparameters","learningRate"],d),n}function Wd(i,t){const e={},n=r(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const o=r(t,["trainingDataset"]);o!=null&&s(e,["tuningTask","trainingData"],Jd(i,o));const a=r(t,["config"]);return a!=null&&s(e,["config"],Od(i,a,e)),e}function Yd(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],n);const o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function Zd(i,t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);e!==void 0&&a!=null&&s(e,["_query","pageToken"],a);const l=r(t,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),n}function Kd(i,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Zd(i,n,e)),e}function zd(i,t,e){const n={},o=r(t,["gcsUri"]);if(e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o),r(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Xd(i,t){const e={},n=r(t,["gcsUri"]);return n!=null&&s(e,["validationDatasetUri"],n),e}function Qd(i,t,e){const n={},o=r(t,["validationDataset"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec"],Xd(i,o));const a=r(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&s(e,["tunedModelDisplayName"],a);const l=r(t,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const u=r(t,["epochCount"]);e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],u);const d=r(t,["learningRateMultiplier"]);e!==void 0&&d!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const c=r(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=r(t,["adapterSize"]);if(e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),r(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function jd(i,t){const e={},n=r(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const o=r(t,["trainingDataset"]);o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],zd(i,o,e));const a=r(t,["config"]);return a!=null&&s(e,["config"],Qd(i,a,e)),e}function ef(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["model"],n);const o=r(t,["name"]);return o!=null&&s(e,["endpoint"],o),e}function Ii(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["state"]);o!=null&&s(e,["state"],ai(i,o));const a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);const l=r(t,["tuningTask","startTime"]);l!=null&&s(e,["startTime"],l);const u=r(t,["tuningTask","completeTime"]);u!=null&&s(e,["endTime"],u);const d=r(t,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=r(t,["description"]);c!=null&&s(e,["description"],c);const f=r(t,["baseModel"]);f!=null&&s(e,["baseModel"],f);const p=r(t,["_self"]);p!=null&&s(e,["tunedModel"],ef(i,p));const m=r(t,["distillationSpec"]);m!=null&&s(e,["distillationSpec"],m);const h=r(t,["experiment"]);h!=null&&s(e,["experiment"],h);const g=r(t,["labels"]);g!=null&&s(e,["labels"],g);const y=r(t,["pipelineJob"]);y!=null&&s(e,["pipelineJob"],y);const _=r(t,["serviceAccount"]);_!=null&&s(e,["serviceAccount"],_);const A=r(t,["tunedModelDisplayName"]);return A!=null&&s(e,["tunedModelDisplayName"],A),e}function tf(i,t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=r(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Ii(i,l))),s(e,["tuningJobs"],a)}return e}function nf(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["metadata"]);o!=null&&s(e,["metadata"],o);const a=r(t,["done"]);a!=null&&s(e,["done"],a);const l=r(t,["error"]);return l!=null&&s(e,["error"],l),e}function of(i,t){const e={},n=r(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);const o=r(t,["epoch"]);o!=null&&s(e,["epoch"],o);const a=r(t,["step"]);a!=null&&s(e,["step"],a);const l=r(t,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function rf(i,t){const e={},n=r(t,["model"]);n!=null&&s(e,["model"],n);const o=r(t,["endpoint"]);o!=null&&s(e,["endpoint"],o);const a=r(t,["checkpoints"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>of(i,u))),s(e,["checkpoints"],l)}return e}function ft(i,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const o=r(t,["state"]);o!=null&&s(e,["state"],ai(i,o));const a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);const l=r(t,["startTime"]);l!=null&&s(e,["startTime"],l);const u=r(t,["endTime"]);u!=null&&s(e,["endTime"],u);const d=r(t,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=r(t,["error"]);c!=null&&s(e,["error"],c);const f=r(t,["description"]);f!=null&&s(e,["description"],f);const p=r(t,["baseModel"]);p!=null&&s(e,["baseModel"],p);const m=r(t,["tunedModel"]);m!=null&&s(e,["tunedModel"],rf(i,m));const h=r(t,["supervisedTuningSpec"]);h!=null&&s(e,["supervisedTuningSpec"],h);const g=r(t,["tuningDataStats"]);g!=null&&s(e,["tuningDataStats"],g);const y=r(t,["encryptionSpec"]);y!=null&&s(e,["encryptionSpec"],y);const _=r(t,["partnerModelTuningSpec"]);_!=null&&s(e,["partnerModelTuningSpec"],_);const A=r(t,["distillationSpec"]);A!=null&&s(e,["distillationSpec"],A);const M=r(t,["experiment"]);M!=null&&s(e,["experiment"],M);const k=r(t,["labels"]);k!=null&&s(e,["labels"],k);const P=r(t,["pipelineJob"]);P!=null&&s(e,["pipelineJob"],P);const N=r(t,["serviceAccount"]);N!=null&&s(e,["serviceAccount"],N);const V=r(t,["tunedModelDisplayName"]);return V!=null&&s(e,["tunedModelDisplayName"],V),e}function sf(i,t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const o=r(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>ft(i,l))),s(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class af extends Te{constructor(t){super(),this.apiClient=t,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new Je(Ce.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const n=await this.tuneMldevInternal(e);let o="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?o=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(o=n.name.split("/operations/")[0]),{name:o,state:it.JOB_STATE_QUEUED}}}}async getInternal(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Yd(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>ft(this.apiClient,f))}else{const c=qd(this.apiClient,t);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Ii(this.apiClient,f))}}async listInternal(t){var e,n,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Kd(this.apiClient,t);return u=S("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=sf(this.apiClient,f),m=new In;return Object.assign(m,p),m})}else{const c=Bd(this.apiClient,t);return u=S("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=tf(this.apiClient,f),m=new In;return Object.assign(m,p),m})}}async tuneInternal(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=jd(this.apiClient,t);return a=S("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>ft(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,n;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wd(this.apiClient,t);return a=S("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>nf(this.apiClient,d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lf{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const uf=1024*1024*8,cf=3,df=1e3,ff=2,Ke="x-goog-upload-status";async function pf(i,t,e){var n,o,a;let l=0,u=0,d=new ot(new Response),c="upload";for(l=i.size;u<l;){const p=Math.min(uf,l-u),m=i.slice(u,u+p);u+p>=l&&(c+=", finalize");let h=0,g=df;for(;h<cf&&(d=await e.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((n=d==null?void 0:d.headers)===null||n===void 0)&&n[Ke]));)h++,await hf(g),g=g*ff;if(u+=p,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Ke])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((a=d==null?void 0:d.headers)===null||a===void 0?void 0:a[Ke])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function mf(i){return{size:i.size,type:i.type}}function hf(i){return new Promise(t=>setTimeout(t,i))}class gf{async upload(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await pf(t,e,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await mf(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yf{create(t,e,n){return new vf(t,e,n)}}class vf{constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xn="x-goog-api-key";class Cf{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(Xn)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Xn,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tf="gl-node/";class _f{constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const n=To(t,void 0,void 0);n&&(t.httpOptions?t.httpOptions.baseUrl=n:t.httpOptions={baseUrl:n}),this.apiVersion=t.apiVersion;const o=new Cf(this.apiKey);this.apiClient=new Lc({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:Tf+"web",uploader:new gf,downloader:new lf}),this.models=new Qc(this.apiClient),this.live=new Yc(this.apiClient,o,new yf),this.chats=new Yr(this.models,this.apiClient),this.caches=new Jr(this.apiClient),this.files=new ss(this.apiClient),this.operations=new ud(this.apiClient),this.authTokens=new Gd(this.apiClient),this.tunings=new af(this.apiClient)}}const Ef=[{title:"Tanya AI",href:route("tanyaai")}],zf=({api_key:i})=>{const t=new _f({apiKey:i}),[e,n]=Ye.useState(""),[o,a]=Ye.useState(!1),[l,u]=Ye.useState("Hai, saya bisa bantu tentang alur kerja aplikasi");async function d(c){c.preventDefault(),a(!0);const f=await t.models.generateContent({model:"gemini-2.0-flash",contents:e,config:{systemInstruction:Ui}});u(f.text),n(""),a(!1)}return B.jsxs(Pi,{breadcrumbs:Ef,children:[B.jsx(xi,{title:"AI Pemandu aplikasi"}),B.jsx(Mi,{title:"Tanya AI seputar aplikasi perpus ini",description:"Tanya apapun yang kamu mau tapi seputar aplikasi ini aja",children:B.jsxs(ki,{className:"w-full max-w-4xl self-center",children:[B.jsx(Et,{children:o?B.jsxs(_t,{variant:"ghost",disabled:!0,children:[B.jsx(Vi,{className:"animate-spin"}),"Loading..."]}):l&&B.jsx("article",{className:"prose prose-invert",children:B.jsx(Ni,{children:l})})}),B.jsx(wi,{}),B.jsx(Et,{children:B.jsxs("form",{onSubmit:d,className:"flex gap-2",children:[B.jsx(Ri,{placeholder:"Tanya sama ai tulis disini...",value:e,onChange:c=>n(c.target.value)}),B.jsx(_t,{size:"icon",type:"submit",disabled:!e,children:B.jsx(Fi,{})})]})})]})})]})};export{zf as default};
